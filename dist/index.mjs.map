{"version":3,"sources":["../src/drawer/index.ts","../src/drawer/content/ui/content.tsx","../src/drawer/lib/hooks/use-drawer-context.ts","../src/drawer/lib/providers/drawer-context.tsx","../src/drawer/lib/providers/portal-context.tsx","../src/drawer/lib/hooks/use-portal-context.ts","../src/drawer/content/ui/sheet.tsx","../src/shared/lib/helpers.ts","../src/drawer/lib/constants.ts","../src/drawer/lib/helpers.ts","../src/shared/lib/hooks/use-value.ts","../src/shared/lib/hooks/use-value-change.ts","../src/shared/lib/hooks/use-set-style.ts","../src/shared/ui/draggable/ui/draggable.tsx","../src/shared/ui/draggable/lib/helpers.ts","../src/shared/ui/draggable/lib/hooks/use-drag-controls.ts","../src/shared/ui/draggable/lib/hooks/use-controls-state.ts","../src/shared/ui/draggable/lib/hooks/use-draggable.ts","../src/shared/ui/draggable/lib/hooks/use-prevent-scroll.ts","#style-inject:#style-inject","../src/shared/ui/draggable/ui/draggable.css","../src/drawer/content/lib/helpers.ts","../src/drawer/content/lib/hooks/use-drag-events/use-drag-events.ts","../src/drawer/content/lib/hooks/use-drag-events/use-get-snap.ts","../src/drawer/content/lib/hooks/use-snap-to-current.ts","../src/drawer/content/lib/hooks/use-snap-to.ts","../src/drawer/overlay/ui/overlay.tsx","../src/drawer/overlay/ui/overlay-primitive.tsx","../src/drawer/portal/ui/portal.tsx","../src/drawer/root/ui/root.tsx","../src/drawer/root/lib/hooks/use-open-state.ts","../src/drawer/root/lib/hooks/use-snap-state.ts","../src/drawer/root/lib/hooks/use-constraint-events.ts","../src/drawer/root/lib/hooks/use-scaled-background.ts","../src/drawer/scrollable/ui/scrollable.tsx","../src/drawer/scrollable/lib/helpers.ts","../src/drawer/snap-areas/ui/snap-areas.tsx","../src/drawer/snap-areas/lib/hooks/use-mounted.ts","../src/drawer/snap-areas/ui/areas.tsx","../src/drawer/snap-areas/lib/constants.ts","../src/drawer/snap-areas/ui/lines.tsx","../src/drawer/index.css"],"sourcesContent":["import { Close, Description, Title, Trigger } from \"@radix-ui/react-dialog\";\n\nimport { Content } from \"./content\";\nimport { Overlay } from \"./overlay\";\nimport { Portal } from \"./portal\";\nimport { Root } from \"./root\";\nimport { Scrollable } from \"./scrollable\";\nimport { SnapAreas } from \"./snap-areas\";\n\nimport \"./index.css\";\n\nexport type { Snap } from \"./lib/types\";\nexport type { RootProps as DrawerRootProps } from \"./root\";\nexport type { ContentProps as DrawerContentProps } from \"./content\";\nexport type { PortalProps as DrawerPortalProps } from \"./portal\";\nexport type { OverlayProps as DrawerOverlayProps } from \"./overlay\";\nexport type { ScrollableProps as DrawerScrollableProps } from \"./scrollable\";\nexport type {\n\tDialogTriggerProps as DrawerTriggerProps,\n\tDialogTitleProps as DrawerTitleProps,\n\tDialogDescriptionProps as DrawerDescriptionProps,\n\tDialogCloseProps as DrawerCloseProps,\n} from \"@radix-ui/react-dialog\";\n\nexport const Drawer = {\n\tRoot,\n\tContent,\n\tPortal,\n\tOverlay,\n\tSnapAreas,\n\tScrollable,\n\tTrigger,\n\tClose,\n\tTitle,\n\tDescription,\n};\n\nexport {\n\tRoot as DrawerRoot,\n\tContent as DrawerContent,\n\tPortal as DrawerPortal,\n\tOverlay as DrawerOverlay,\n\tSnapAreas as DrawerSnapAreas,\n\tScrollable as DrawerScrollable,\n\tTrigger as DrawerTrigger,\n\tClose as DrawerClose,\n\tTitle as DrawerTitle,\n\tDescription as DrawerDescription,\n};\n","\"use client\";\n\nimport { forwardRef } from \"react\";\n\nimport {\n\tContent as ContentPrimitive,\n\ttype DialogContentProps as ContentPrimitiveProps,\n} from \"@radix-ui/react-dialog\";\n\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\n\nimport { Sheet, type SheetProps } from \"./sheet\";\n\nexport interface ContentProps\n\textends Omit<ContentPrimitiveProps, keyof SheetProps>,\n\t\tSheetProps {}\n\nexport const Content = forwardRef<HTMLDivElement, ContentProps>(\n\t(\n\t\t{\n\t\t\tonOpenAutoFocus,\n\t\t\tonCloseAutoFocus,\n\t\t\tonEscapeKeyDown,\n\t\t\tonPointerDownOutside,\n\t\t\tonInteractOutside,\n\t\t\tforceMount,\n\t\t\t...props\n\t\t},\n\t\tref,\n\t) => {\n\t\tconst { modal, drawerControls, dismissible } = useDrawerContext();\n\n\t\tconst primitiveProps = {\n\t\t\tonOpenAutoFocus,\n\t\t\tonCloseAutoFocus,\n\t\t\tonPointerDownOutside,\n\t\t\tforceMount,\n\t\t};\n\n\t\treturn (\n\t\t\t<ContentPrimitive\n\t\t\t\tref={ref}\n\t\t\t\tasChild\n\t\t\t\t{...primitiveProps}\n\t\t\t\tgv-drawer=\"\"\n\t\t\t\tonEscapeKeyDown={(e) => {\n\t\t\t\t\tif (drawerControls.isDragging.get()) return e.preventDefault();\n\t\t\t\t\tif (!dismissible) e.preventDefault();\n\t\t\t\t\tonEscapeKeyDown?.(e);\n\t\t\t\t}}\n\t\t\t\tonInteractOutside={(e) => {\n\t\t\t\t\tif (!modal || !dismissible) e.preventDefault();\n\t\t\t\t\tonInteractOutside?.(e);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Sheet {...props} />\n\t\t\t</ContentPrimitive>\n\t\t);\n\t},\n);\n\nContent.displayName = \"Drawer.Content\";\n","import { useContext } from \"react\";\n\nimport { DrawerContext } from \"../providers\";\n\nexport const useDrawerContext = () => {\n\tconst context = useContext(DrawerContext);\n\n\tif (context === null) {\n\t\tthrow new Error(\"useDrawerContext was used outside of its Provider\");\n\t}\n\n\treturn context;\n};\n","import {\n\ttype FC,\n\ttype PropsWithChildren,\n\ttype RefObject,\n\tcreateContext,\n} from \"react\";\n\nimport type {\n\tConstraintEventHandler,\n\tDragControls,\n} from \"@/shared/ui/draggable\";\n\nimport type { OnOpenChange, SetSnap, Snap } from \"../types\";\n\nexport interface DrawerContextValue {\n\tdrawerControls: DragControls<Snap>;\n\tscrollableControls: DragControls<number>;\n\tdefaultOpen: boolean;\n\topen: boolean;\n\tonOpenChange: OnOpenChange;\n\tsnapPoints: Snap[];\n\tsnap: Snap;\n\tsetSnap: SetSnap;\n\tdismissible: boolean;\n\tdrawerRef: RefObject<HTMLDivElement | null>;\n\tscrollableRef: RefObject<HTMLDivElement | null>;\n\tscrollLockTimeout: number;\n\tmodal: boolean;\n\tonDrawerConstraint: ConstraintEventHandler;\n\tonScrollableConstraint: ConstraintEventHandler;\n}\n\nexport const DrawerContext = createContext<DrawerContextValue | null>(null);\n\nexport interface DrawerContextProviderProps extends PropsWithChildren {\n\tvalue: DrawerContextValue;\n}\n\nexport const DrawerContextProvider: FC<DrawerContextProviderProps> = (\n\tprops,\n) => <DrawerContext.Provider {...props} />;\n","import { type FC, type PropsWithChildren, createContext } from \"react\";\n\nexport const PortalContext = createContext<true | undefined>(undefined);\n\nexport interface PortalContextProviderProps extends PropsWithChildren {\n\tforceMount?: true;\n}\n\nexport const PortalContextProvider: FC<PortalContextProviderProps> = ({\n\tforceMount,\n\t...props\n}) => <PortalContext.Provider value={forceMount} {...props} />;\n","import { useContext } from \"react\";\n\nimport { PortalContext } from \"../providers\";\n\nexport const usePortalContext = () => {\n\tconst context = useContext(PortalContext);\n\n\tif (context === null) {\n\t\tthrow new Error(\"usePortalContext was used outside of its Provider\");\n\t}\n\n\treturn context;\n};\n","\"use client\";\n\nimport { forwardRef, useEffect } from \"react\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\n\nimport { cssToPx } from \"@/drawer/lib/helpers\";\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\nimport type { Snap } from \"@/drawer/lib/types\";\nimport { mergeHandlers } from \"@/shared/lib/helpers\";\nimport { useSetStyle } from \"@/shared/lib/hooks\";\nimport { Draggable, type DraggableProps } from \"@/shared/ui/draggable\";\n\nimport { getMinConstraint, transformTemplate } from \"../lib/helpers\";\nimport { useDragEvents, useSnapTo, useSnapToCurrent } from \"../lib/hooks\";\n\nexport interface SheetProps extends DraggableProps<Snap> {}\n\nexport const Sheet = forwardRef<HTMLDivElement, SheetProps>(\n\t(\n\t\t{ onConstraint, onPointerUp, onPointerCancel, onDragEnd, ...props },\n\t\tforwardedRef,\n\t) => {\n\t\tconst {\n\t\t\topen,\n\t\t\tonOpenChange,\n\t\t\tdrawerControls,\n\t\t\tsnapPoints,\n\t\t\tsnap,\n\t\t\tsetSnap,\n\t\t\tdismissible,\n\t\t\tdrawerRef: contextRef,\n\t\t\tscrollLockTimeout,\n\t\t\tonDrawerConstraint,\n\t\t} = useDrawerContext();\n\n\t\tconst { locked } = drawerControls;\n\n\t\tconst firstPoint = snapPoints[0];\n\n\t\tconst snapTo = useSnapTo(drawerControls.y);\n\n\t\tconst { drawerRef, listeners } = useDragEvents({\n\t\t\tsnapPoints,\n\t\t\tsnapTo,\n\t\t\tsnap,\n\t\t\tsetSnap,\n\t\t\tonClose: () => onOpenChange(false),\n\t\t\tdismissible,\n\t\t\tlocked,\n\t\t});\n\n\t\tconst { handleDragEnd, handleRelease } = listeners;\n\n\t\tconst composedRef = useComposedRefs(drawerRef, forwardedRef, contextRef);\n\n\t\tconst [setStyle, resetStyle] = useSetStyle(drawerRef);\n\n\t\tuseSnapToCurrent(snapTo, snap, open);\n\n\t\tuseEffect(() => {\n\t\t\tif (open) resetStyle(\"pointerEvents\");\n\t\t\telse setStyle({ pointerEvents: \"none\" });\n\t\t}, [open, resetStyle, setStyle]);\n\n\t\treturn (\n\t\t\t<Draggable\n\t\t\t\tref={composedRef}\n\t\t\t\tdragControls={drawerControls}\n\t\t\t\ttransformTemplate={transformTemplate}\n\t\t\t\tconstraints={{\n\t\t\t\t\tmin: (el) => getMinConstraint(el, snapPoints),\n\t\t\t\t\tmax: (el) => (dismissible ? 0 : -cssToPx(firstPoint, el)),\n\t\t\t\t}}\n\t\t\t\tscrollLockTimeout={scrollLockTimeout}\n\t\t\t\tonConstraint={(e, type) => {\n\t\t\t\t\tonConstraint?.(e, type);\n\t\t\t\t\treturn onDrawerConstraint(e, type);\n\t\t\t\t}}\n\t\t\t\tonDragEnd={mergeHandlers(handleDragEnd, onDragEnd)}\n\t\t\t\tonPointerUp={mergeHandlers(handleRelease, onPointerUp)}\n\t\t\t\tonPointerCancel={mergeHandlers(handleRelease, onPointerCancel)}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t);\n\t},\n);\n\nSheet.displayName = \"Drawer.Sheet\";\n","import type { Style } from \"./types\";\n\nexport const isNumber = (value: unknown): value is number =>\n\ttypeof value === \"number\";\n\nexport const isString = (value: unknown): value is string =>\n\ttypeof value === \"string\";\n\nexport const isFunction = (value: unknown): value is (...args: any) => any =>\n\ttypeof value === \"function\";\n\nexport const clamp = (min: number, max: number, value: number) =>\n\tMath.min(max, Math.max(min, value));\n\nexport const mergeHandlers = <T extends (...args: any) => any>(\n\t...handlers: Array<T | undefined>\n) => {\n\treturn (...args: Parameters<T>) =>\n\t\thandlers.forEach((handler) => void handler?.(...(args as any)));\n};\n\n// Some code was taken from https://github.com/emilkowalski/vaul/blob/main/src/helpers.ts\nconst cache = new WeakMap<HTMLElement, Style>();\n\nexport const setStyle = (el: HTMLElement, style: Style) => {\n\tconst original: Style = {};\n\tconst elStyle = el.style as unknown as Style;\n\n\tfor (const [key, value] of Object.entries(style)) {\n\t\toriginal[key] = elStyle[key];\n\t\telStyle[key] = value;\n\t}\n\n\tconst cached = cache.get(el);\n\tcache.set(el, { ...cached, ...original });\n};\n\nexport const resetStyle = (el: HTMLElement, prop?: string) => {\n\tconst original = cache.get(el);\n\n\tif (!original) return;\n\n\tconst elStyle = el.style as unknown as Style;\n\n\tif (prop) {\n\t\telStyle[prop] = original[prop];\n\t\treturn;\n\t}\n\n\tObject.entries(original).forEach(([key, value]) => {\n\t\telStyle[key] = value;\n\t});\n};\n","export const PX_REGEX = /(\\d{1,20})px/gi;\n\nexport const PERCENT_REGEX = /[\\d.]{1,20}%/;\n","import { isNumber } from \"@/shared/lib/helpers\";\n\nimport { PERCENT_REGEX, PX_REGEX } from \"./constants\";\nimport type { Snap } from \"./types\";\n\nexport const cssToPx = (value: number | string, el: HTMLElement): number => {\n\tif (!el) throw new Error(\"You have to provide element\");\n\n\tconst rect = el.getBoundingClientRect();\n\n\tif (isNumber(value)) return value;\n\n\tif (value.match(PERCENT_REGEX))\n\t\treturn (rect.height * parseFloat(value)) / 100;\n\n\tif (value.match(PX_REGEX)) return parseFloat(value);\n\n\tthrow new Error(\"Unknown value units\");\n};\n\nexport const getSnapAreas = (snapPoints: Snap[], el: HTMLElement) => {\n\tconst toPx = (value: Snap) => cssToPx(value, el);\n\n\t// [0, '200px', '500px', '1000px']\n\t// [100, 350, 750]\n\tconst [first, ...other] = snapPoints;\n\n\tlet prev = first;\n\n\tconst snapAreas = [];\n\n\tfor (const snap of other) {\n\t\tsnapAreas.push((toPx(prev) + toPx(snap)) / 2);\n\t\tprev = snap;\n\t}\n\n\treturn snapAreas;\n};\n","import { useRef } from \"react\";\n\nimport type { Get, Handler, Set as SetType, Subscribe, Value } from \"../types\";\n\nexport const useValue = <T>(initial: T): Value<T> => {\n\tconst v = useRef(initial);\n\tconst key = useRef(0);\n\n\tconst handlers = useRef(new Map<number, Handler<T>>());\n\n\tconst notify = () => {\n\t\thandlers.current.forEach((handler) => void handler(v.current));\n\t};\n\n\tconst set: SetType<T> = (value) => {\n\t\tif (value === v.current) return;\n\n\t\tv.current = value;\n\n\t\tnotify();\n\t};\n\n\tconst subscribe: Subscribe<T> = (handler) => {\n\t\tconst oldKey = key.current;\n\n\t\thandlers.current.set(oldKey, handler);\n\n\t\tkey.current += 1;\n\n\t\treturn () => handlers.current.delete(oldKey);\n\t};\n\n\tconst get: Get<T> = () => v.current;\n\n\treturn {\n\t\tset,\n\t\tget,\n\t\tsubscribe,\n\t};\n};\n","import { useEffect } from \"react\";\n\nimport type { Handler, Value } from \"../types\";\n\nexport const useValueChange = <T>(value: Value<T>, handler: Handler<T>) => {\n\tuseEffect(() => {\n\t\tconst unsub = value.subscribe(handler);\n\n\t\treturn () => {\n\t\t\tunsub();\n\t\t};\n\t}, [handler, value.subscribe]);\n};\n","import type { RefObject } from \"react\";\n\nimport { resetStyle, setStyle } from \"../helpers\";\nimport type { Style } from \"../types\";\n\nexport const useSetStyle = (ref: RefObject<HTMLElement | null>) => {\n\tconst set = (style: Style) => {\n\t\tconst el = ref?.current;\n\t\tif (!el) return;\n\n\t\tsetStyle(el as HTMLElement, style);\n\t};\n\n\tconst reset = (prop?: string) => {\n\t\tconst el = ref?.current;\n\t\tif (!el) return;\n\n\t\tresetStyle(el as HTMLElement, prop);\n\t};\n\n\treturn [set, reset] as const;\n};\n","import {\n\ttype ForwardedRef,\n\ttype ReactElement,\n\ttype Ref,\n\tforwardRef,\n} from \"react\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\nimport { mergeHandlers } from \"@/shared/lib/helpers\";\nimport { useSetStyle, useValueChange } from \"@/shared/lib/hooks\";\n\nimport { defaultTransformTemplate } from \"../lib/helpers\";\nimport { useControlsState, useDraggable, usePreventScroll } from \"../lib/hooks\";\nimport type {\n\tConstraintEventHandler,\n\tConstraints,\n\tDragControls,\n\tDragEventHandler,\n\tTransformTemplate,\n} from \"../lib/types\";\nimport \"./draggable.css\";\n\ninterface DragProps<T> {\n\tdragControls?: DragControls<T>;\n\tconstraints?: Constraints;\n\tonConstraint?: ConstraintEventHandler;\n\tonDragStart?: DragEventHandler;\n\tonDragMove?: DragEventHandler;\n\tonDragEnd?: DragEventHandler;\n\ttransformTemplate?: TransformTemplate;\n\tscrollLockTimeout?: number;\n}\n\ntype PrimitiveDivProps<T> = Omit<\n\tReact.ComponentPropsWithoutRef<typeof Primitive.div>,\n\tkeyof DragProps<T>\n>;\n\nexport interface DraggableProps<T> extends PrimitiveDivProps<T>, DragProps<T> {}\n\nconst _Draggable = <T,>(\n\t{\n\t\tconstraints,\n\t\tdragControls: cDragControls,\n\t\tonConstraint,\n\t\tonPointerDown,\n\t\tonPointerMove,\n\t\tonPointerUp,\n\t\tonPointerCancel,\n\t\tonDragStart,\n\t\tonDragMove,\n\t\tonDragEnd,\n\t\ttransformTemplate = defaultTransformTemplate,\n\t\tscrollLockTimeout = 0,\n\t\t...props\n\t}: DraggableProps<T>,\n\tforwardedRef: ForwardedRef<HTMLDivElement>,\n) => {\n\tconst dragControls = useControlsState(cDragControls);\n\tconst { y, isDragging } = dragControls;\n\n\tconst { ref, wantToDrag, listeners } = useDraggable({\n\t\tdragControls,\n\t\tconstraints,\n\t\tonConstraint,\n\t\tonDragStart,\n\t\tonDragMove,\n\t\tonDragEnd,\n\t\ttransformTemplate,\n\t\tscrollLockTimeout,\n\t});\n\n\tconst { handlePointerDown, handlePointerMove, handleRelease } = listeners;\n\n\tconst composedRef = useComposedRefs(ref, forwardedRef);\n\n\tconst [setStyle, resetStyle] = useSetStyle(ref);\n\n\tuseValueChange(y, (latest) => {\n\t\tsetStyle({ transform: transformTemplate(latest) });\n\t});\n\n\tuseValueChange(wantToDrag, (latest) => {\n\t\tif (latest) setStyle({ transition: \"none\" });\n\t\telse resetStyle(\"transition\");\n\t});\n\n\tusePreventScroll(isDragging);\n\n\treturn (\n\t\t<Primitive.div\n\t\t\tgv-drawer-draggable=\"\"\n\t\t\tdraggable=\"false\"\n\t\t\tref={composedRef}\n\t\t\tonPointerDown={mergeHandlers(handlePointerDown, onPointerDown)}\n\t\t\tonPointerMove={mergeHandlers(handlePointerMove, onPointerMove)}\n\t\t\tonPointerUp={mergeHandlers(handleRelease, onPointerUp)}\n\t\t\tonPointerCancel={mergeHandlers(handleRelease, onPointerCancel)}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nexport const Draggable = forwardRef(_Draggable) as <T>(\n\tprops: DraggableProps<T> & { ref?: Ref<HTMLDivElement> },\n) => ReactElement;\n","import { clamp, isFunction } from \"@/shared/lib/helpers\";\n\nimport type { Constraint, TransformTemplate } from \"./types\";\n\nexport const getConstraint = (c: Constraint, el: HTMLElement) =>\n\tisFunction(c) ? c(el) : c;\n\nexport const defaultTransformTemplate: TransformTemplate = (y) =>\n\t`translate3d(0, ${y}px, 0)`;\n\nconst reachedBottom = (el: HTMLElement) =>\n\tMath.abs(el.scrollTop + el.clientHeight - el.scrollHeight) < 2;\n\nconst hasScrollOverflow = (el: HTMLElement) => {\n\tconst style = window.getComputedStyle(el);\n\tconst overflows = [\"scroll\", \"auto\"];\n\n\treturn (\n\t\toverflows.includes(style.overflowY) || overflows.includes(style.overflow)\n\t);\n};\n\n// Some code was taken from https://github.com/emilkowalski/vaul/blob/main/src/index.tsx\nexport const shouldDrag = (\n\tel: HTMLElement,\n\troot: HTMLElement,\n\tisDraggingDown: boolean,\n\tcheckScroll: boolean,\n) => {\n\tconst selection = window.getSelection()?.toString();\n\n\tif (selection?.length) return false;\n\n\tif (!checkScroll) return true;\n\n\tlet element = el;\n\n\t// Keep climbing up the DOM tree as long as there's a parent\n\twhile (element) {\n\t\t// Check if the element is scrollable\n\t\tif (element.scrollHeight > element.clientHeight) {\n\t\t\tconst top = element.scrollTop <= 0 && isDraggingDown;\n\n\t\t\tconst bottom = reachedBottom(element) && !isDraggingDown;\n\n\t\t\tconst scrollOverflow = hasScrollOverflow(element);\n\n\t\t\tif (!top && !bottom && scrollOverflow) return false;\n\t\t}\n\n\t\tif (element === root) return true;\n\n\t\t// Move up to the parent element\n\t\telement = element.parentNode as HTMLElement;\n\t}\n\n\treturn true;\n};\n\n// Some code was taken from https://github.com/clauderic/dnd-kit/blob/master/stories/3%20-%20Examples/Drawer/modifiers.ts'\nconst rubberband = (dis: number, dim: number, el: number) => {\n\treturn (dis * dim * el) / (dim + el * dis);\n};\n\nconst reverseRubberband = (dis: number, dim: number, el: number) => {\n\treturn (dis * dim) / (el * (dim - dis));\n};\n\nconst applyRubberband = (\n\tpos: number,\n\tmin: number,\n\tmax: number,\n\tfunc = rubberband,\n\tel = 0.3,\n) => {\n\tif (el === 0) return clamp(min, max, pos);\n\tif (pos < min) return -func(min - pos, 100, el) + min;\n\tif (pos > max) return +func(pos - max, 100, el) + max;\n\treturn pos;\n};\n\nexport const getDumpedValue = (pos: number, min: number, max: number) =>\n\tapplyRubberband(pos, min, max);\n\nexport const getUndumpedValue = (pos: number, min: number, max: number) =>\n\tapplyRubberband(pos, min, max, reverseRubberband);\n\n// Px per ms\nexport const getVelocity = (delta: number, timeDelta: number) =>\n\tdelta / timeDelta;\n","import { useValue } from \"@/shared/lib/hooks\";\n\nimport type { DragControls, NumberOr } from \"../types\";\n\nexport const useDragControls = <T>(initLocked = false): DragControls<T> => {\n\tconst locked = useValue(initLocked);\n\tconst y = useValue<NumberOr<T>>(0);\n\tconst isDragging = useValue(false);\n\n\treturn {\n\t\tlock: () => locked.set(true),\n\t\tunlock: () => locked.set(false),\n\t\tlocked,\n\t\ty,\n\t\tisDragging,\n\t};\n};\n","import type { DragControls } from \"../types\";\nimport { useDragControls } from \"./use-drag-controls\";\n\nexport const useControlsState = <T>(\n\tdragControls: DragControls<T> | undefined,\n\tinitLocked?: boolean,\n) => {\n\tconst internal = useDragControls<T>(initLocked);\n\n\treturn dragControls ?? internal;\n};\n","import { type PointerEvent as ReactPointerEvent, useRef } from \"react\";\n\nimport { clamp, isNumber } from \"@/shared/lib/helpers\";\nimport { useSetStyle, useValue } from \"@/shared/lib/hooks\";\n\nimport {\n\tgetConstraint,\n\tgetDumpedValue,\n\tgetUndumpedValue,\n\tgetVelocity,\n\tshouldDrag,\n} from \"../helpers\";\nimport {\n\ttype ConstraintEventHandler,\n\tConstraintType,\n\ttype Constraints,\n\ttype DragControls,\n\ttype DragEventHandler,\n\ttype NumberOr,\n\ttype TransformTemplate,\n} from \"../types\";\n\ninterface DraggableOptions<T> {\n\tdragControls: DragControls<T>;\n\tconstraints?: Constraints;\n\tonConstraint?: ConstraintEventHandler;\n\tonDragStart?: DragEventHandler;\n\tonDragMove?: DragEventHandler;\n\tonDragEnd?: DragEventHandler;\n\ttransformTemplate?: TransformTemplate;\n\tscrollLockTimeout: number;\n}\n\nexport const useDraggable = <T>({\n\tdragControls,\n\ttransformTemplate,\n\tconstraints,\n\tonConstraint,\n\tonDragStart,\n\tonDragMove,\n\tonDragEnd,\n\tscrollLockTimeout,\n}: DraggableOptions<T>) => {\n\tconst { y, isDragging } = dragControls;\n\n\tconst last = useRef(0);\n\tconst lastTime = useRef(0);\n\tconst lastVelocity = useRef(0);\n\n\tconst initTop = useRef(0);\n\tconst initY = useRef<NumberOr<T> | null>(null);\n\n\tconst wantToDrag = useValue(false);\n\n\tconst ref = useRef<HTMLDivElement>(null);\n\tconst [setStyle, resetStyle] = useSetStyle(ref);\n\n\tconst lastTimePrevented = useRef(0);\n\n\tconst getNumberY = () => {\n\t\tconst node = ref.current;\n\t\tif (!node) return 0;\n\n\t\t// Resetting y and checking rect y\n\t\tsetStyle({ transform: transformTemplate?.(0) ?? \"none\" });\n\t\tconst resettedTop = node.getBoundingClientRect().top;\n\t\tresetStyle(\"transform\");\n\n\t\treturn initTop.current - resettedTop;\n\t};\n\n\tconst handleDragStart: DragEventHandler<HTMLElement> = (e, info) => {\n\t\tconst node = ref.current;\n\t\tif (!node) return;\n\n\t\tconst target = e.target as HTMLElement;\n\t\ttarget.setPointerCapture(e.pointerId);\n\n\t\tisDragging.set(true);\n\n\t\tonDragStart?.(e, info);\n\t};\n\n\tconst handleDrag: DragEventHandler = (e, info) => {\n\t\tconst node = ref.current;\n\t\tif (!node) return;\n\n\t\tconst curY = y.get();\n\t\tconst curNumberY = isNumber(curY) ? curY : getNumberY(); // TODO use cssToPx\n\n\t\t// Constraints\n\t\tif (!constraints) {\n\t\t\ty.set(curNumberY + info.delta);\n\t\t} else {\n\t\t\tconst min = getConstraint(constraints[ConstraintType.Min], node);\n\t\t\tconst max = getConstraint(constraints[ConstraintType.Max], node);\n\n\t\t\tconst newUndumpedY = getUndumpedValue(curNumberY, min, max) + info.delta;\n\n\t\t\tlet proceed = true;\n\t\t\tif (newUndumpedY <= min || newUndumpedY >= max) {\n\t\t\t\tconst constraint =\n\t\t\t\t\tnewUndumpedY <= min ? ConstraintType.Min : ConstraintType.Max;\n\n\t\t\t\tconst res = onConstraint?.(e, constraint);\n\n\t\t\t\tproceed = res === undefined || res;\n\t\t\t}\n\n\t\t\tconst newY = proceed\n\t\t\t\t? getDumpedValue(newUndumpedY, min, max)\n\t\t\t\t: clamp(min, max, newUndumpedY);\n\n\t\t\ty.set(newY);\n\t\t}\n\n\t\tonDragMove?.(e, info);\n\t};\n\n\tconst handleDragEnd: DragEventHandler = (e, info) => onDragEnd?.(e, info);\n\n\tconst resetVariables = () => {\n\t\twantToDrag.set(false);\n\t\tisDragging.set(false);\n\t\tinitY.current = null;\n\t};\n\n\tconst handlePointerDown = (e: ReactPointerEvent<HTMLDivElement>) => {\n\t\tif (!e.isPrimary) return;\n\n\t\tlast.current = e.clientY;\n\t\tlastTime.current = e.timeStamp;\n\n\t\tconst node = ref.current;\n\t\tif (!node) return;\n\n\t\tinitTop.current = node.getBoundingClientRect().top;\n\n\t\t// Stopping transition and setting y to current number value\n\t\twantToDrag.set(true);\n\n\t\tconst curTop = node.getBoundingClientRect().top;\n\n\t\t// Dragging during transition\n\t\tif (initTop.current !== curTop) {\n\t\t\tinitY.current = y.get();\n\t\t\ty.set(getNumberY());\n\t\t}\n\t};\n\n\tconst handlePointerMove = (e: ReactPointerEvent<HTMLDivElement>) => {\n\t\tif (!e.isPrimary) return;\n\n\t\tconst delta = e.clientY - last.current;\n\t\tconst velocity = getVelocity(delta, e.timeStamp - lastTime.current);\n\n\t\tlast.current = e.clientY;\n\t\tlastTime.current = e.timeStamp;\n\t\tlastVelocity.current = velocity;\n\n\t\tif (!wantToDrag.get()) return;\n\n\t\tconst node = ref.current;\n\t\tif (!node) return;\n\n\t\t// Runs once per drag\n\t\tif (!isDragging.get()) {\n\t\t\tconst passed = shouldDrag(\n\t\t\t\te.target as HTMLElement,\n\t\t\t\tnode,\n\t\t\t\tdelta > 0,\n\t\t\t\te.pointerType === \"touch\",\n\t\t\t);\n\n\t\t\tconst passedTimeout =\n\t\t\t\te.timeStamp - lastTimePrevented.current >= scrollLockTimeout;\n\n\t\t\tif (!passed || !passedTimeout) {\n\t\t\t\tresetVariables();\n\n\t\t\t\tlastTimePrevented.current = e.timeStamp;\n\n\t\t\t\t// Resetting to the pos before trying to drag\n\t\t\t\tif (initY.current !== null) y.set(initY.current);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thandleDragStart(e, { delta, velocity });\n\t\t}\n\n\t\t// Check controls\n\t\tif (dragControls.locked.get()) return;\n\n\t\thandleDrag(e, { delta, velocity });\n\t};\n\n\tconst handleRelease = (e: ReactPointerEvent<HTMLDivElement>) => {\n\t\tif (!e.isPrimary) return;\n\n\t\tconst node = ref.current;\n\t\tif (!node) return;\n\n\t\tconst delta = e.clientY - last.current;\n\t\tconst timeDelta = e.timeStamp - lastTime.current;\n\n\t\t// Sometimes the velocity is 0, even if in fact it's not\n\t\tconst velocity = getVelocity(delta, timeDelta) || lastVelocity.current;\n\n\t\tconst wasDragging = isDragging.get();\n\n\t\tresetVariables();\n\n\t\tif (!wasDragging) return;\n\n\t\thandleDragEnd(e, {\n\t\t\tdelta,\n\t\t\tvelocity,\n\t\t});\n\t};\n\n\treturn {\n\t\twantToDrag,\n\t\tref,\n\t\tlisteners: {\n\t\t\thandlePointerDown,\n\t\t\thandlePointerMove,\n\t\t\thandleRelease,\n\t\t},\n\t};\n};\n","import { useCallback, useEffect } from \"react\";\n\nimport type { Value } from \"@/shared/lib/types\";\n\nexport const usePreventScroll = (isDragging: Value<boolean>) => {\n\tconst handleTouchMove = useCallback(\n\t\t(e: TouchEvent) => {\n\t\t\tif (isDragging.get()) e.preventDefault();\n\t\t},\n\t\t[isDragging],\n\t);\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"touchmove\", handleTouchMove, { passive: false });\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"touchmove\", handleTouchMove);\n\t\t};\n\t}, [handleTouchMove]);\n};\n","\n          export default function styleInject(css, { insertAt } = {}) {\n            if (!css || typeof document === 'undefined') return\n          \n            const head = document.head || document.getElementsByTagName('head')[0]\n            const style = document.createElement('style')\n            style.type = 'text/css'\n          \n            if (insertAt === 'top') {\n              if (head.firstChild) {\n                head.insertBefore(style, head.firstChild)\n              } else {\n                head.appendChild(style)\n              }\n            } else {\n              head.appendChild(style)\n            }\n          \n            if (style.styleSheet) {\n              style.styleSheet.cssText = css\n            } else {\n              style.appendChild(document.createTextNode(css))\n            }\n          }\n          ","import styleInject from '#style-inject';styleInject(\"[gv-drawer-draggable] {\\n}\\n@media (hover: hover) and (pointer: fine) {\\n  [gv-drawer-draggable] {\\n    user-select: none;\\n  }\\n}\\n\")","import { cssToPx, getSnapAreas } from \"@/drawer/lib/helpers\";\nimport type { Snap } from \"@/drawer/lib/types\";\nimport { isNumber } from \"@/shared/lib/helpers\";\nimport type { TransformTemplate } from \"@/shared/ui/draggable\";\n\nexport const transformTemplate: TransformTemplate = (y) =>\n\t`translate3d(0, calc(100% + ${isNumber(y) ? `${y}px` : y}), 0)`;\n\nexport const getSnap = (snapPoints: Snap[], value: number, el: HTMLElement) => {\n\tconst snapAreas = getSnapAreas(snapPoints, el);\n\n\tfor (let i = 0; i < snapAreas.length; i++)\n\t\tif (value <= snapAreas[i]) return snapPoints[i];\n\n\treturn snapPoints[snapPoints.length - 1];\n};\n\nexport const getMinConstraint = (el: HTMLElement, snapPoints: Snap[]) => {\n\tconst lastPoint = snapPoints[snapPoints.length - 1];\n\n\treturn -cssToPx(lastPoint, el);\n};\n","import { type PointerEvent as ReactPointerEvent, useRef } from \"react\";\n\nimport type { SetSnap, Snap } from \"@/drawer/lib/types\";\nimport type { Value } from \"@/shared/lib/types\";\nimport type { DragEventHandler } from \"@/shared/ui/draggable\";\n\nimport type { SnapTo } from \"../../types\";\nimport { useGetSnap } from \"./use-get-snap\";\n\ninterface DragEventsOptions {\n\tsnapPoints: Snap[];\n\tsnapTo: SnapTo;\n\tsnap: Snap;\n\tsetSnap: SetSnap;\n\tonClose: () => void;\n\tdismissible: boolean;\n\tlocked: Value<boolean>;\n}\n\nexport const useDragEvents = ({\n\tsnapPoints,\n\tsnapTo,\n\tsnap,\n\tsetSnap,\n\tonClose,\n\tdismissible,\n\tlocked,\n}: DragEventsOptions) => {\n\tconst drawerRef = useRef<HTMLElement | null>(null);\n\n\tconst dismissablePoints = dismissible ? [0, ...snapPoints] : snapPoints;\n\tconst getSnap = useGetSnap(dismissablePoints, drawerRef);\n\n\tconst handleDragEnd: DragEventHandler = (_e, { velocity }) => {\n\t\tconst node = drawerRef?.current;\n\t\tif (!node) return;\n\n\t\tconst rect = node.getBoundingClientRect();\n\t\tconst pos = window.innerHeight - rect.y;\n\n\t\t// Definitely not undefined, because we checked the drawerRef.current earlier\n\t\tconst newSnap = getSnap(pos, locked.get() ? 0 : velocity);\n\t\tif (!newSnap) return;\n\n\t\tif (newSnap === 0) return onClose();\n\n\t\tsetSnap(newSnap);\n\t};\n\n\tconst handleRelease = (e: ReactPointerEvent<HTMLDivElement>) =>\n\t\te.isPrimary && snapTo(snap);\n\n\treturn {\n\t\tdrawerRef,\n\t\tlisteners: {\n\t\t\thandleDragEnd,\n\t\t\thandleRelease,\n\t\t},\n\t};\n};\n","import type { RefObject } from \"react\";\n\nimport { cssToPx } from \"@/drawer/lib/helpers\";\nimport type { Snap } from \"@/drawer/lib/types\";\n\nimport { getSnap } from \"../../helpers\";\n\nexport const useGetSnap = (\n\tsnapPoints: Snap[],\n\tref: RefObject<HTMLElement | null>,\n) => {\n\treturn (pos: number, velocity: number) => {\n\t\tif (!ref?.current || ref.current === null) return;\n\n\t\tconst lastPoint = snapPoints[snapPoints.length - 1];\n\t\tconst maxAddValue = cssToPx(lastPoint, ref.current);\n\t\tconst posWithVelocity = pos + -(velocity / 7) * maxAddValue;\n\n\t\treturn getSnap(snapPoints, posWithVelocity, ref.current);\n\t};\n};\n","import { useEffect } from \"react\";\n\nimport type { Snap } from \"@/drawer/lib/types\";\n\nimport type { SnapTo } from \"../types\";\n\nexport const useSnapToCurrent = (snapTo: SnapTo, snap: Snap, open: boolean) => {\n\treturn useEffect(() => {\n\t\t// setTimeout fixes the opening animation when there's no `Drawer.Overlay`\n\t\t// if (open) setTimeout(() => snapTo(snap), 0)\n\t\tif (open) snapTo(snap);\n\t\telse snapTo(0);\n\t}, [open, snap, snapTo]);\n};\n","import type { Snap } from \"@/drawer/lib/types\";\nimport { isNumber } from \"@/shared/lib/helpers\";\nimport type { Value } from \"@/shared/lib/types\";\n\nexport const useSnapTo = (y: Value<Snap>) => {\n\treturn (to: Snap) => y.set(isNumber(to) ? -to : `-${to}`);\n};\n","\"use client\";\n\nimport { forwardRef, useRef } from \"react\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport {\n\ttype DialogOverlayProps as OverlayPrimitiveProps,\n\tOverlay as RadixOverlayPrimitive,\n} from \"@radix-ui/react-dialog\";\nimport { Presence } from \"@radix-ui/react-presence\";\n\nimport { cssToPx } from \"@/drawer/lib/helpers\";\nimport { useDrawerContext, usePortalContext } from \"@/drawer/lib/hooks\";\nimport type { Snap } from \"@/drawer/lib/types\";\nimport { clamp } from \"@/shared/lib/helpers\";\nimport { useSetStyle, useValueChange } from \"@/shared/lib/hooks\";\n\nimport { OverlayPrimitive } from \"./overlay-primitive\";\n\ninterface WithCustomPrimitiveProps {\n\tradixPrimitive: false;\n\tblockInteraction?: boolean;\n}\n\ninterface WithRadixPrimitiveProps {\n\tradixPrimitive?: boolean;\n\tblockInteraction?: never;\n}\n\nexport type OverlayProps = OverlayPrimitiveProps &\n\t(WithRadixPrimitiveProps | WithCustomPrimitiveProps) & {\n\t\tfadeFrom?: Snap;\n\t\tfinalOpacity?: number;\n\t};\n\nexport const Overlay = forwardRef<HTMLDivElement, OverlayProps>(\n\t(\n\t\t{ radixPrimitive = true, fadeFrom = 0, finalOpacity = 0.8, ...props },\n\t\tforwardedRef,\n\t) => {\n\t\tconst contextForceMount = usePortalContext();\n\n\t\tconst { drawerControls, drawerRef, snapPoints, open } = useDrawerContext();\n\t\tconst { forceMount = contextForceMount, ...other } = props;\n\n\t\tconst lastPoint = snapPoints[snapPoints.length - 1];\n\n\t\tconst ref = useRef<HTMLDivElement>(null);\n\t\tconst composedRef = useComposedRefs(ref, forwardedRef);\n\n\t\tconst [setStyle, resetStyle] = useSetStyle(ref);\n\n\t\tuseValueChange(drawerControls.y, (latest) => {\n\t\t\tconst node = drawerRef.current;\n\t\t\tif (!node) return;\n\n\t\t\tconst y = cssToPx(latest, node);\n\t\t\tconst fadeFromY = cssToPx(fadeFrom, node);\n\t\t\tconst opacity = clamp(\n\t\t\t\t0,\n\t\t\t\t1,\n\t\t\t\t((-y - fadeFromY) / (cssToPx(lastPoint, node) - fadeFromY)) *\n\t\t\t\t\tfinalOpacity,\n\t\t\t);\n\n\t\t\tsetStyle({ opacity: opacity.toString() });\n\t\t});\n\n\t\tuseValueChange(drawerControls.isDragging, (latest) => {\n\t\t\tif (latest) setStyle({ transition: \"none\" });\n\t\t\telse resetStyle(\"transition\");\n\t\t});\n\n\t\tif (radixPrimitive)\n\t\t\treturn (\n\t\t\t\t<RadixOverlayPrimitive\n\t\t\t\t\tgv-drawer-overlay=\"\"\n\t\t\t\t\tdata-testid=\"overlay\"\n\t\t\t\t\tref={composedRef}\n\t\t\t\t\t{...other}\n\t\t\t\t/>\n\t\t\t);\n\n\t\treturn (\n\t\t\t<Presence present={forceMount || open}>\n\t\t\t\t<OverlayPrimitive\n\t\t\t\t\tgv-drawer-overlay=\"\"\n\t\t\t\t\tdata-testid=\"overlay\"\n\t\t\t\t\tref={composedRef}\n\t\t\t\t\t{...other}\n\t\t\t\t/>\n\t\t\t</Presence>\n\t\t);\n\t},\n);\n\nOverlay.displayName = \"Drawer.Overlay\";\n","\"use client\";\n\nimport { forwardRef } from \"react\";\n\nimport {\n\ttype ComponentPropsWithoutRef,\n\tPrimitive,\n} from \"@radix-ui/react-primitive\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { RemoveScroll } from \"react-remove-scroll\";\n\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\n\ninterface OverlayPrimitiveProps\n\textends ComponentPropsWithoutRef<typeof Primitive.div> {\n\tblockInteraction?: boolean;\n}\n\n// Code from https://github.com/radix-ui/primitives/blob/main/packages/react/dialog/src/Dialog.tsx#L197\nexport const OverlayPrimitive = forwardRef<\n\tHTMLDivElement,\n\tOverlayPrimitiveProps\n>((props, ref) => {\n\tconst { drawerRef, open, modal } = useDrawerContext();\n\tconst { style, blockInteraction = modal, ...other } = props;\n\n\treturn (\n\t\t<RemoveScroll\n\t\t\tenabled={blockInteraction}\n\t\t\tas={Slot}\n\t\t\tallowPinchZoom\n\t\t\tshards={[drawerRef]}\n\t\t>\n\t\t\t<Primitive.div\n\t\t\t\tdata-state={open ? \"open\" : \"closed\"}\n\t\t\t\tref={ref}\n\t\t\t\t// We re-enable pointer-events prevented by `Dialog.Content` to allow scrolling the overlay.\n\t\t\t\tstyle={{\n\t\t\t\t\tpointerEvents: blockInteraction ? \"auto\" : \"none\",\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\t{...other}\n\t\t\t/>\n\t\t</RemoveScroll>\n\t);\n});\n\nOverlayPrimitive.displayName = \"Drawer.OverlayPrimitive\";\n","\"use client\";\n\nimport type { FC } from \"react\";\n\nimport {\n\tPortal as PortalPrimitive,\n\ttype DialogPortalProps as PortalPrimitiveProps,\n} from \"@radix-ui/react-dialog\";\n\nimport { PortalContextProvider } from \"@/drawer/lib/providers\";\n\nexport interface PortalProps extends PortalPrimitiveProps {}\n\nexport const Portal: FC<PortalProps> = ({ ...props }) => {\n\treturn (\n\t\t<PortalContextProvider forceMount={props.forceMount}>\n\t\t\t<PortalPrimitive {...props} />\n\t\t</PortalContextProvider>\n\t);\n};\n\nPortal.displayName = \"Drawer.Portal\";\n","\"use client\";\n\nimport { type FC, type PropsWithChildren, useRef } from \"react\";\n\nimport { Root as RootPrimitive } from \"@radix-ui/react-dialog\";\n\nimport {\n\tDrawerContextProvider,\n\ttype DrawerContextValue,\n} from \"@/drawer/lib/providers\";\nimport type { OnOpenChange, SetSnap, Snap } from \"@/drawer/lib/types\";\nimport type { WithoutThisOrThat } from \"@/shared/lib/types\";\nimport { useDragControls } from \"@/shared/ui/draggable\";\n\nimport {\n\tuseConstraintEvents,\n\tuseOpenState,\n\tuseScaledBackground,\n\tuseSnapState,\n} from \"../lib/hooks\";\n\ntype OpenProps = WithoutThisOrThat<\n\t{ defaultOpen?: boolean; open: boolean; onOpenChange: OnOpenChange },\n\t\"defaultOpen\",\n\t\"open\" | \"onOpenChange\"\n>;\n\ntype SnapProps = WithoutThisOrThat<\n\t{ snapPoints?: Snap[]; snap: Snap; setSnap: SetSnap },\n\t\"\",\n\t\"snap\" | \"setSnap\"\n>;\n\ninterface WithScaledBackground {\n\tscaleFrom?: Snap;\n\tshouldScaleBackground: true;\n}\n\ninterface WithoutScaledBackground {\n\tscaleFrom?: never;\n\tshouldScaleBackground?: false;\n}\n\nexport type RootProps = PropsWithChildren &\n\tOpenProps &\n\tSnapProps & {\n\t\tdismissible?: boolean;\n\t\tmodal?: boolean;\n\t\tscrollLockTimeout?: number;\n\t} & (WithScaledBackground | WithoutScaledBackground);\n\nexport const Root: FC<RootProps> = ({\n\tdefaultOpen = false,\n\topen: cOpen,\n\tonOpenChange: cOnOpenChange,\n\tsnapPoints = [\"100%\"],\n\tsnap: cSnap,\n\tsetSnap: cSetSnap,\n\tdismissible = true,\n\tmodal = true,\n\tscrollLockTimeout = 300,\n\tscaleFrom = 0,\n\tshouldScaleBackground = false,\n\tchildren,\n}) => {\n\tconst drawerControls = useDragControls<Snap>();\n\tconst scrollableControls = useDragControls<number>(true);\n\n\tconst [open, onOpenChange] = useOpenState(defaultOpen, cOpen, cOnOpenChange);\n\tconst [snap, setSnap] = useSnapState(snapPoints[0], cSnap, cSetSnap);\n\n\tconst drawerRef = useRef<HTMLDivElement | null>(null);\n\tconst scrollableRef = useRef<HTMLDivElement | null>(null);\n\n\tconst constraintHandlers = useConstraintEvents(\n\t\tdrawerRef,\n\t\tscrollableRef,\n\t\tdrawerControls,\n\t\tscrollableControls,\n\t);\n\n\tconst context: DrawerContextValue = {\n\t\tdrawerControls,\n\t\tscrollableControls,\n\t\tdefaultOpen,\n\t\topen,\n\t\tonOpenChange,\n\t\tsnapPoints,\n\t\tsnap,\n\t\tsetSnap,\n\t\tdismissible,\n\t\tdrawerRef,\n\t\tscrollableRef,\n\t\tscrollLockTimeout,\n\t\tmodal,\n\t\t...constraintHandlers,\n\t};\n\n\tuseScaledBackground(\n\t\tdrawerControls,\n\t\tdrawerRef,\n\t\tsnapPoints,\n\t\tshouldScaleBackground,\n\t\tscaleFrom,\n\t);\n\n\treturn (\n\t\t<RootPrimitive open={open} onOpenChange={onOpenChange} modal={modal}>\n\t\t\t<DrawerContextProvider value={context}>{children}</DrawerContextProvider>\n\t\t</RootPrimitive>\n\t);\n};\n","import { useState } from \"react\";\n\nimport type { OnOpenChange } from \"@/drawer/lib/types\";\n\nexport const useOpenState = (\n\tinit: boolean,\n\topen?: boolean,\n\tonOpenChange?: OnOpenChange,\n): [boolean, OnOpenChange] => {\n\tconst internal = useState(init);\n\n\treturn open && onOpenChange ? [open, onOpenChange] : internal;\n};\n","import { useState } from \"react\";\n\nimport type { SetSnap, Snap } from \"@/drawer/lib/types\";\n\nexport const useSnapState = (init: Snap, snap?: Snap, setSnap?: SetSnap) => {\n\tconst internal = useState(init);\n\n\treturn snap && setSnap ? ([snap, setSnap] as const) : internal;\n};\n","import type { RefObject } from \"react\";\n\nimport type { Snap } from \"@/drawer/lib/types\";\nimport {\n\ttype ConstraintEventHandler,\n\tConstraintType,\n\ttype DragControls,\n} from \"@/shared/ui/draggable\";\n\nexport const useConstraintEvents = (\n\tdrawerRef: RefObject<HTMLDivElement | null>,\n\tscrollableRef: RefObject<HTMLDivElement | null>,\n\tdrawerControls: DragControls<Snap>,\n\tscrollableControls: DragControls<number>,\n) => {\n\tconst onDrawerConstraint: ConstraintEventHandler = (_, type) => {\n\t\tif (!drawerRef.current) return;\n\t\tif (!scrollableRef.current) return;\n\t\tif (type === ConstraintType.Max) return;\n\n\t\tdrawerControls.lock();\n\t\tscrollableControls.unlock();\n\n\t\treturn false;\n\t};\n\n\tconst onScrollableConstraint: ConstraintEventHandler = (_, type) => {\n\t\tif (!scrollableRef.current) return;\n\t\tif (type === ConstraintType.Min) return;\n\n\t\tdrawerControls.unlock();\n\t\tscrollableControls.lock();\n\t};\n\n\treturn { onDrawerConstraint, onScrollableConstraint };\n};\n","import type { RefObject } from \"react\";\n\nimport { cssToPx } from \"@/drawer/lib/helpers\";\nimport type { Snap } from \"@/drawer/lib/types\";\nimport { resetStyle, setStyle } from \"@/shared/lib/helpers\";\nimport { useValueChange } from \"@/shared/lib/hooks\";\nimport type { DragControls } from \"@/shared/ui/draggable\";\n\nexport const useScaledBackground = (\n\tdrawerControls: DragControls<Snap>,\n\tdrawerRef: RefObject<HTMLDivElement | null>,\n\tsnapPoints: Snap[],\n\tshouldScaleBackground: boolean,\n\tscaleFrom: Snap,\n) => {\n\tconst lastPoint = snapPoints[snapPoints.length - 1];\n\n\tconst getWrapper = () => document.querySelector(\"[gv-drawer-wrapper]\");\n\n\tuseValueChange(drawerControls.y, (latest) => {\n\t\tif (!shouldScaleBackground) return;\n\n\t\tconst node = drawerRef.current;\n\t\tif (!node) return;\n\n\t\tconst wrapper = getWrapper();\n\t\tif (!wrapper) return;\n\n\t\tconst y = cssToPx(latest, node);\n\t\tconst scaleFromY = cssToPx(scaleFrom, node);\n\t\tconst multiplier = Math.max(\n\t\t\t(-y - scaleFromY) / (cssToPx(lastPoint, node) - scaleFromY),\n\t\t\t0,\n\t\t);\n\n\t\tconst width = (wrapper as HTMLElement).offsetWidth;\n\n\t\tconst transform =\n\t\t\t`scale(calc(1 - ((2 * var(--offset)) / ${width}) * ${multiplier})) ` +\n\t\t\t`translate3d(0, calc(env(safe-area-inset-top) + (var(--offset) * 1px) * ${multiplier}), 0)`;\n\n\t\tconst borderRadius = `calc(var(--border-radius) * ${multiplier})`;\n\n\t\tsetStyle(wrapper as HTMLElement, { transform, borderRadius });\n\t});\n\n\tuseValueChange(drawerControls.isDragging, (latest) => {\n\t\tif (!shouldScaleBackground) return;\n\n\t\tconst wrapper = getWrapper();\n\t\tif (!wrapper) return;\n\n\t\tif (latest) setStyle(wrapper as HTMLElement, { transition: \"none\" });\n\t\telse resetStyle(wrapper as HTMLElement, \"transition\");\n\t});\n};\n","import { forwardRef, useEffect, useRef } from \"react\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\n\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\nimport { clamp, mergeHandlers } from \"@/shared/lib/helpers\";\nimport { useSetStyle } from \"@/shared/lib/hooks\";\nimport {\n\ttype DragEventHandler,\n\tDraggable,\n\ttype DraggableProps,\n} from \"@/shared/ui/draggable\";\nimport {\n\tgetDumpedValue,\n\tgetUndumpedValue,\n} from \"@/shared/ui/draggable/lib/helpers\";\n\nimport { getMinConstraint } from \"../lib/helpers\";\n\nexport interface ScrollableProps extends DraggableProps<number> {}\n\nexport const Scrollable = forwardRef<HTMLDivElement, ScrollableProps>(\n\t({ onConstraint, onDragEnd, onPointerDown, ...props }, forwardedRef) => {\n\t\tconst {\n\t\t\tdrawerControls,\n\t\t\tscrollableControls,\n\t\t\tscrollableRef,\n\t\t\tsnap,\n\t\t\tsnapPoints,\n\t\t\tonScrollableConstraint,\n\t\t} = useDrawerContext();\n\t\tconst { y } = scrollableControls;\n\n\t\tconst animationId = useRef<number | null>(null);\n\n\t\tconst composedRef = useComposedRefs(scrollableRef, forwardedRef);\n\n\t\tconst [setStyle, resetStyle] = useSetStyle(scrollableRef);\n\n\t\tconst max = 0;\n\n\t\tuseEffect(() => {\n\t\t\tif (snap === snapPoints[snapPoints.length - 1]) return;\n\n\t\t\ty.set(max);\n\n\t\t\tdrawerControls.unlock();\n\t\t\tscrollableControls.lock();\n\t\t}, [\n\t\t\tsnap,\n\t\t\tdrawerControls.unlock,\n\t\t\tscrollableControls.lock,\n\t\t\tsnapPoints.length,\n\t\t\tsnapPoints[snapPoints.length - 1],\n\t\t\ty.set,\n\t\t]);\n\n\t\tuseEffect(() => {\n\t\t\ty.set(max);\n\t\t}, [y.set]);\n\n\t\tconst resetTransition = () => resetStyle(\"transitionDuration\");\n\n\t\tconst resetToBounds = () => {\n\t\t\tconst node = scrollableRef.current;\n\t\t\tif (!node) return;\n\t\t\ty.set(clamp(getMinConstraint(node), max, y.get()));\n\t\t};\n\n\t\tconst animate = (prev: number, cur: number, velocity: number) => {\n\t\t\tconst node = scrollableRef.current;\n\t\t\tif (!node) return;\n\n\t\t\tconst time = cur - prev;\n\n\t\t\tconst min = getMinConstraint(node);\n\t\t\tconst delta = velocity * time;\n\t\t\tconst newUndumpedY = getUndumpedValue(y.get(), min, max) + delta;\n\n\t\t\ty.set(getDumpedValue(newUndumpedY, min, max));\n\n\t\t\tconst acceleration = -0.0015;\n\n\t\t\tconst newVelocity =\n\t\t\t\tMath.sign(velocity) *\n\t\t\t\tMath.max(Math.abs(velocity) + acceleration * time, 0);\n\n\t\t\tconst maxDist = Math.abs(velocity) * 100;\n\t\t\tconst outOfMax =\n\t\t\t\tnewUndumpedY - min <= -maxDist || newUndumpedY - max >= maxDist;\n\n\t\t\tif (newVelocity === 0 || outOfMax) {\n\t\t\t\tresetTransition();\n\t\t\t\treturn resetToBounds();\n\t\t\t}\n\n\t\t\tanimationId.current = window.requestAnimationFrame((time) =>\n\t\t\t\tanimate(cur, time, newVelocity),\n\t\t\t);\n\t\t};\n\n\t\tconst handleDragEnd: DragEventHandler = (_, { velocity }) => {\n\t\t\tif (scrollableControls.locked.get()) return resetToBounds();\n\n\t\t\tsetStyle({ transitionDuration: \"0s\" });\n\t\t\tanimationId.current = window.requestAnimationFrame((time) =>\n\t\t\t\tanimate(time, time, velocity),\n\t\t\t);\n\t\t};\n\n\t\tconst handlePointerDown = () => {\n\t\t\tif (animationId.current === null) return;\n\n\t\t\twindow.cancelAnimationFrame(animationId.current);\n\t\t\tanimationId.current = null;\n\t\t\tresetTransition();\n\t\t};\n\n\t\treturn (\n\t\t\t<Draggable\n\t\t\t\tgv-drawer-scrollable=\"\"\n\t\t\t\tref={composedRef}\n\t\t\t\tdragControls={scrollableControls}\n\t\t\t\tconstraints={{\n\t\t\t\t\tmin: getMinConstraint,\n\t\t\t\t\tmax,\n\t\t\t\t}}\n\t\t\t\tonDragEnd={mergeHandlers(handleDragEnd, onDragEnd)}\n\t\t\t\tonPointerDown={mergeHandlers(handlePointerDown, onPointerDown)}\n\t\t\t\tonConstraint={mergeHandlers(onScrollableConstraint, onConstraint)}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t);\n\t},\n);\n\nScrollable.displayName = \"Drawer.Scrollable\";\n","export const getMinConstraint = (el: HTMLElement) => {\n\tconst rect = el.getBoundingClientRect();\n\tconst parent = el.parentNode as HTMLElement;\n\tconst parentRect = parent.getBoundingClientRect();\n\n\treturn parentRect.height - rect.height;\n};\n","import { forwardRef } from \"react\";\n\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\n\nimport { Areas } from \"./areas\";\nimport { Lines } from \"./lines\";\n\nexport const SnapAreas = forwardRef<\n\tHTMLDivElement,\n\tReact.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => {\n\tconst { open } = useDrawerContext();\n\n\tif (!open) return null;\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tgv-drawer-snap-areas=\"\"\n\t\t\tstyle={{\n\t\t\t\tposition: \"fixed\",\n\t\t\t\tinset: 0,\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\tflexDirection: \"column-reverse\",\n\t\t\t\tpointerEvents: \"none\",\n\t\t\t}}\n\t\t\t{...props}\n\t\t>\n\t\t\t<Lines />\n\t\t\t<Areas />\n\t\t</div>\n\t);\n});\n\nSnapAreas.displayName = \"Drawer.SnapAreas\";\n","import { useEffect, useState } from \"react\";\n\nexport const useMounted = () => {\n\tconst [mounted, setMounted] = useState(false);\n\n\tuseEffect(() => setMounted(true), []);\n\n\treturn mounted;\n};\n","import type { FC } from \"react\";\n\nimport { getSnapAreas } from \"@/drawer/lib/helpers\";\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\n\nimport { COLORS } from \"../lib/constants\";\nimport { useMounted } from \"../lib/hooks\";\n\nexport const Areas: FC = () => {\n\tconst { snapPoints, dismissible, drawerRef } = useDrawerContext();\n\n\tconst dismissiblePoints = dismissible ? [0, ...snapPoints] : snapPoints;\n\n\tconst mounted = useMounted();\n\n\tif (!mounted) return null;\n\n\tconst snapAreas = getSnapAreas(dismissiblePoints, drawerRef.current!);\n\n\tconst [_, snapHeights] = snapAreas.reduce<[number, number[]]>(\n\t\t([prev, acc], cur) => [cur, [...acc, cur - prev]],\n\t\t[0, []],\n\t);\n\n\treturn [...snapHeights, `100%`].map((height, index) => (\n\t\t<div\n\t\t\tkey={index}\n\t\t\tgv-drawer-area=\"\"\n\t\t\tstyle={{\n\t\t\t\tflexShrink: 0,\n\t\t\t\topacity: 0,\n\t\t\t\theight,\n\t\t\t}}\n\t\t/>\n\t));\n};\n","export const COLORS = [\n\t\"#ef4444\",\n\t\"#3b82f6\",\n\t\"#cffafe\",\n\t\"#84cc16\",\n\t\"#8b5cf6\",\n\t\"#f97316\",\n];\n","import type { FC } from \"react\";\n\nimport { cssToPx } from \"@/drawer/lib/helpers\";\nimport { useDrawerContext } from \"@/drawer/lib/hooks\";\n\nimport { COLORS } from \"../lib/constants\";\nimport { useMounted } from \"../lib/hooks\";\n\nexport const Lines: FC = () => {\n\tconst { snapPoints, dismissible, drawerRef } = useDrawerContext();\n\n\tconst mounted = useMounted();\n\n\tif (!mounted) return null;\n\n\tconst snapLines = (dismissible ? [0, ...snapPoints] : snapPoints).map(\n\t\t(point) => cssToPx(point, drawerRef.current!),\n\t);\n\n\treturn snapLines.map((line, index) => (\n\t\t<div\n\t\t\tkey={line}\n\t\t\tgv-drawer-lines=\"\"\n\t\t\tstyle={{\n\t\t\t\tleft: 0,\n\t\t\t\tright: 0,\n\t\t\t\tposition: \"fixed\",\n\t\t\t\tborderTop: \"1px dashed\",\n\t\t\t\tborderColor: COLORS[index % COLORS.length],\n\t\t\t\tbottom: line,\n\t\t\t}}\n\t\t/>\n\t));\n};\n","import styleInject from '#style-inject';styleInject(\"@source \\\".\\\";\\n[gv-drawer-overlay],\\n[gv-drawer],\\n[gv-drawer-scrollable],\\n[gv-drawer-wrapper] {\\n  --duration: 0.5s;\\n  --timing-function: cubic-bezier(0.32, 0.72, 0, 1);\\n  --scroll-bar-shift: var(--removed-body-scroll-bar-size, 0);\\n}\\n[gv-drawer-overlay] {\\n  opacity: 0;\\n  transition: opacity var(--duration) var(--timing-function);\\n}\\n[gv-drawer] {\\n  transform: translate3d(0, 100%, 0);\\n}\\n[gv-drawer],\\n[gv-drawer-scrollable] {\\n  transition: transform var(--duration) var(--timing-function);\\n}\\n[gv-drawer-wrapper] {\\n  --border-radius: 8px;\\n  --offset: 14;\\n  transform-origin: top center;\\n  transition-property: transform, border-radius;\\n  transition-duration: var(--duration);\\n  transition-timing-function: var(--timing-function);\\n}\\n[gv-drawer]::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: calc(100% - 1px);\\n  background: inherit;\\n  background-color: inherit;\\n  left: 0;\\n  right: 0;\\n  height: 100%;\\n  z-index: -1;\\n}\\n[gv-drawer-overlay][data-state=closed],\\n[gv-drawer][data-state=closed] {\\n  animation: fake-animation var(--duration) var(--timing-function);\\n}\\n@keyframes fake-animation {\\n  from {\\n  }\\n  to {\\n  }\\n}\\n\")"],"mappings":";;;AAAA,SAAS,OAAO,aAAa,OAAO,eAAe;;;ACEnD,SAAS,cAAAA,mBAAkB;AAE3B;AAAA,EACC,WAAW;AAAA,OAEL;;;ACPP,SAAS,kBAAkB;;;ACA3B;AAAA,EAIC;AAAA,OACM;AAmCF;AARE,IAAM,gBAAgB,cAAyC,IAAI;AAMnE,IAAM,wBAAwD,CACpE,UACI,oBAAC,cAAc,UAAd,EAAwB,GAAG,OAAO;;;ACxCxC,SAA0C,iBAAAC,sBAAqB;AAWzD,gBAAAC,YAAA;AATC,IAAM,gBAAgBD,eAAgC,MAAS;AAM/D,IAAM,wBAAwD,CAAC;AAAA,EACrE;AAAA,EACA,GAAG;AACJ,MAAM,gBAAAC,KAAC,cAAc,UAAd,EAAuB,OAAO,YAAa,GAAG,OAAO;;;AFPrD,IAAM,mBAAmB,MAAM;AACrC,QAAM,UAAU,WAAW,aAAa;AAExC,MAAI,YAAY,MAAM;AACrB,UAAM,IAAI,MAAM,mDAAmD;AAAA,EACpE;AAEA,SAAO;AACR;;;AGZA,SAAS,cAAAC,mBAAkB;AAIpB,IAAM,mBAAmB,MAAM;AACrC,QAAM,UAAUC,YAAW,aAAa;AAExC,MAAI,YAAY,MAAM;AACrB,UAAM,IAAI,MAAM,mDAAmD;AAAA,EACpE;AAEA,SAAO;AACR;;;ACVA,SAAS,cAAAC,aAAY,aAAAC,kBAAiB;AAEtC,SAAS,mBAAAC,wBAAuB;;;ACFzB,IAAM,WAAW,CAAC,UACxB,OAAO,UAAU;AAKX,IAAM,aAAa,CAAC,UAC1B,OAAO,UAAU;AAEX,IAAM,QAAQ,CAAC,KAAa,KAAa,UAC/C,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC;AAE5B,IAAM,gBAAgB,IACzB,aACC;AACJ,SAAO,IAAI,SACV,SAAS,QAAQ,CAAC,YAAY,MAAK,mCAAU,GAAI,MAAa;AAChE;AAGA,IAAM,QAAQ,oBAAI,QAA4B;AAEvC,IAAM,WAAW,CAAC,IAAiB,UAAiB;AAC1D,QAAM,WAAkB,CAAC;AACzB,QAAM,UAAU,GAAG;AAEnB,aAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,KAAK,GAAG;AACjD,aAAS,GAAG,IAAI,QAAQ,GAAG;AAC3B,YAAQ,GAAG,IAAI;AAAA,EAChB;AAEA,QAAM,SAAS,MAAM,IAAI,EAAE;AAC3B,QAAM,IAAI,IAAI,EAAE,GAAG,QAAQ,GAAG,SAAS,CAAC;AACzC;AAEO,IAAM,aAAa,CAAC,IAAiB,SAAkB;AAC7D,QAAM,WAAW,MAAM,IAAI,EAAE;AAE7B,MAAI,CAAC,SAAU;AAEf,QAAM,UAAU,GAAG;AAEnB,MAAI,MAAM;AACT,YAAQ,IAAI,IAAI,SAAS,IAAI;AAC7B;AAAA,EACD;AAEA,SAAO,QAAQ,QAAQ,EAAE,QAAQ,CAAC,CAAC,KAAK,KAAK,MAAM;AAClD,YAAQ,GAAG,IAAI;AAAA,EAChB,CAAC;AACF;;;ACpDO,IAAM,WAAW;AAEjB,IAAM,gBAAgB;;;ACGtB,IAAM,UAAU,CAAC,OAAwB,OAA4B;AAC3E,MAAI,CAAC,GAAI,OAAM,IAAI,MAAM,6BAA6B;AAEtD,QAAM,OAAO,GAAG,sBAAsB;AAEtC,MAAI,SAAS,KAAK,EAAG,QAAO;AAE5B,MAAI,MAAM,MAAM,aAAa;AAC5B,WAAQ,KAAK,SAAS,WAAW,KAAK,IAAK;AAE5C,MAAI,MAAM,MAAM,QAAQ,EAAG,QAAO,WAAW,KAAK;AAElD,QAAM,IAAI,MAAM,qBAAqB;AACtC;AAEO,IAAM,eAAe,CAAC,YAAoB,OAAoB;AACpE,QAAM,OAAO,CAAC,UAAgB,QAAQ,OAAO,EAAE;AAI/C,QAAM,CAAC,OAAO,GAAG,KAAK,IAAI;AAE1B,MAAI,OAAO;AAEX,QAAM,YAAY,CAAC;AAEnB,aAAW,QAAQ,OAAO;AACzB,cAAU,MAAM,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,CAAC;AAC5C,WAAO;AAAA,EACR;AAEA,SAAO;AACR;;;ACrCA,SAAS,cAAc;AAIhB,IAAM,WAAW,CAAI,YAAyB;AACpD,QAAM,IAAI,OAAO,OAAO;AACxB,QAAM,MAAM,OAAO,CAAC;AAEpB,QAAM,WAAW,OAAO,oBAAI,IAAwB,CAAC;AAErD,QAAM,SAAS,MAAM;AACpB,aAAS,QAAQ,QAAQ,CAAC,YAAY,KAAK,QAAQ,EAAE,OAAO,CAAC;AAAA,EAC9D;AAEA,QAAM,MAAkB,CAAC,UAAU;AAClC,QAAI,UAAU,EAAE,QAAS;AAEzB,MAAE,UAAU;AAEZ,WAAO;AAAA,EACR;AAEA,QAAM,YAA0B,CAAC,YAAY;AAC5C,UAAM,SAAS,IAAI;AAEnB,aAAS,QAAQ,IAAI,QAAQ,OAAO;AAEpC,QAAI,WAAW;AAEf,WAAO,MAAM,SAAS,QAAQ,OAAO,MAAM;AAAA,EAC5C;AAEA,QAAM,MAAc,MAAM,EAAE;AAE5B,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD;;;ACvCA,SAAS,iBAAiB;AAInB,IAAM,iBAAiB,CAAI,OAAiB,YAAwB;AAC1E,YAAU,MAAM;AACf,UAAM,QAAQ,MAAM,UAAU,OAAO;AAErC,WAAO,MAAM;AACZ,YAAM;AAAA,IACP;AAAA,EACD,GAAG,CAAC,SAAS,MAAM,SAAS,CAAC;AAC9B;;;ACPO,IAAM,cAAc,CAAC,QAAuC;AAClE,QAAM,MAAM,CAAC,UAAiB;AAC7B,UAAM,KAAK,2BAAK;AAChB,QAAI,CAAC,GAAI;AAET,aAAS,IAAmB,KAAK;AAAA,EAClC;AAEA,QAAM,QAAQ,CAAC,SAAkB;AAChC,UAAM,KAAK,2BAAK;AAChB,QAAI,CAAC,GAAI;AAET,eAAW,IAAmB,IAAI;AAAA,EACnC;AAEA,SAAO,CAAC,KAAK,KAAK;AACnB;;;ACrBA;AAAA,EAIC;AAAA,OACM;AAEP,SAAS,uBAAuB;AAChC,SAAS,iBAAiB;;;ACJnB,IAAM,gBAAgB,CAAC,GAAe,OAC5C,WAAW,CAAC,IAAI,EAAE,EAAE,IAAI;AAElB,IAAM,2BAA8C,CAAC,MAC3D,kBAAkB,CAAC;AAEpB,IAAM,gBAAgB,CAAC,OACtB,KAAK,IAAI,GAAG,YAAY,GAAG,eAAe,GAAG,YAAY,IAAI;AAE9D,IAAM,oBAAoB,CAAC,OAAoB;AAC9C,QAAM,QAAQ,OAAO,iBAAiB,EAAE;AACxC,QAAM,YAAY,CAAC,UAAU,MAAM;AAEnC,SACC,UAAU,SAAS,MAAM,SAAS,KAAK,UAAU,SAAS,MAAM,QAAQ;AAE1E;AAGO,IAAM,aAAa,CACzB,IACA,MACA,gBACA,gBACI;AA5BL;AA6BC,QAAM,aAAY,YAAO,aAAa,MAApB,mBAAuB;AAEzC,MAAI,uCAAW,OAAQ,QAAO;AAE9B,MAAI,CAAC,YAAa,QAAO;AAEzB,MAAI,UAAU;AAGd,SAAO,SAAS;AAEf,QAAI,QAAQ,eAAe,QAAQ,cAAc;AAChD,YAAM,MAAM,QAAQ,aAAa,KAAK;AAEtC,YAAM,SAAS,cAAc,OAAO,KAAK,CAAC;AAE1C,YAAM,iBAAiB,kBAAkB,OAAO;AAEhD,UAAI,CAAC,OAAO,CAAC,UAAU,eAAgB,QAAO;AAAA,IAC/C;AAEA,QAAI,YAAY,KAAM,QAAO;AAG7B,cAAU,QAAQ;AAAA,EACnB;AAEA,SAAO;AACR;AAGA,IAAM,aAAa,CAAC,KAAa,KAAa,OAAe;AAC5D,SAAQ,MAAM,MAAM,MAAO,MAAM,KAAK;AACvC;AAEA,IAAM,oBAAoB,CAAC,KAAa,KAAa,OAAe;AACnE,SAAQ,MAAM,OAAQ,MAAM,MAAM;AACnC;AAEA,IAAM,kBAAkB,CACvB,KACA,KACA,KACA,OAAO,YACP,KAAK,QACD;AACJ,MAAI,OAAO,EAAG,QAAO,MAAM,KAAK,KAAK,GAAG;AACxC,MAAI,MAAM,IAAK,QAAO,CAAC,KAAK,MAAM,KAAK,KAAK,EAAE,IAAI;AAClD,MAAI,MAAM,IAAK,QAAO,CAAC,KAAK,MAAM,KAAK,KAAK,EAAE,IAAI;AAClD,SAAO;AACR;AAEO,IAAM,iBAAiB,CAAC,KAAa,KAAa,QACxD,gBAAgB,KAAK,KAAK,GAAG;AAEvB,IAAM,mBAAmB,CAAC,KAAa,KAAa,QAC1D,gBAAgB,KAAK,KAAK,KAAK,iBAAiB;AAG1C,IAAM,cAAc,CAAC,OAAe,cAC1C,QAAQ;;;ACrFF,IAAM,kBAAkB,CAAI,aAAa,UAA2B;AAC1E,QAAM,SAAS,SAAS,UAAU;AAClC,QAAM,IAAI,SAAsB,CAAC;AACjC,QAAM,aAAa,SAAS,KAAK;AAEjC,SAAO;AAAA,IACN,MAAM,MAAM,OAAO,IAAI,IAAI;AAAA,IAC3B,QAAQ,MAAM,OAAO,IAAI,KAAK;AAAA,IAC9B;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD;;;ACbO,IAAM,mBAAmB,CAC/B,cACA,eACI;AACJ,QAAM,WAAW,gBAAmB,UAAU;AAE9C,SAAO,sCAAgB;AACxB;;;ACVA,SAAiD,UAAAC,eAAc;AAiCxD,IAAM,eAAe,CAAI;AAAA,EAC/B;AAAA,EACA,mBAAAC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,MAA2B;AAC1B,QAAM,EAAE,GAAG,WAAW,IAAI;AAE1B,QAAM,OAAOC,QAAO,CAAC;AACrB,QAAM,WAAWA,QAAO,CAAC;AACzB,QAAM,eAAeA,QAAO,CAAC;AAE7B,QAAM,UAAUA,QAAO,CAAC;AACxB,QAAM,QAAQA,QAA2B,IAAI;AAE7C,QAAM,aAAa,SAAS,KAAK;AAEjC,QAAM,MAAMA,QAAuB,IAAI;AACvC,QAAM,CAACC,WAAUC,WAAU,IAAI,YAAY,GAAG;AAE9C,QAAM,oBAAoBF,QAAO,CAAC;AAElC,QAAM,aAAa,MAAM;AA3D1B;AA4DE,UAAM,OAAO,IAAI;AACjB,QAAI,CAAC,KAAM,QAAO;AAGlB,IAAAC,UAAS,EAAE,YAAW,KAAAF,sBAAA,gBAAAA,mBAAoB,OAApB,YAA0B,OAAO,CAAC;AACxD,UAAM,cAAc,KAAK,sBAAsB,EAAE;AACjD,IAAAG,YAAW,WAAW;AAEtB,WAAO,QAAQ,UAAU;AAAA,EAC1B;AAEA,QAAM,kBAAiD,CAAC,GAAG,SAAS;AACnE,UAAM,OAAO,IAAI;AACjB,QAAI,CAAC,KAAM;AAEX,UAAM,SAAS,EAAE;AACjB,WAAO,kBAAkB,EAAE,SAAS;AAEpC,eAAW,IAAI,IAAI;AAEnB,+CAAc,GAAG;AAAA,EAClB;AAEA,QAAM,aAA+B,CAAC,GAAG,SAAS;AACjD,UAAM,OAAO,IAAI;AACjB,QAAI,CAAC,KAAM;AAEX,UAAM,OAAO,EAAE,IAAI;AACnB,UAAM,aAAa,SAAS,IAAI,IAAI,OAAO,WAAW;AAGtD,QAAI,CAAC,aAAa;AACjB,QAAE,IAAI,aAAa,KAAK,KAAK;AAAA,IAC9B,OAAO;AACN,YAAM,MAAM,cAAc,2BAA8B,GAAG,IAAI;AAC/D,YAAM,MAAM,cAAc,2BAA8B,GAAG,IAAI;AAE/D,YAAM,eAAe,iBAAiB,YAAY,KAAK,GAAG,IAAI,KAAK;AAEnE,UAAI,UAAU;AACd,UAAI,gBAAgB,OAAO,gBAAgB,KAAK;AAC/C,cAAM,aACL,gBAAgB;AAEjB,cAAM,MAAM,6CAAe,GAAG;AAE9B,kBAAU,QAAQ,UAAa;AAAA,MAChC;AAEA,YAAM,OAAO,UACV,eAAe,cAAc,KAAK,GAAG,IACrC,MAAM,KAAK,KAAK,YAAY;AAE/B,QAAE,IAAI,IAAI;AAAA,IACX;AAEA,6CAAa,GAAG;AAAA,EACjB;AAEA,QAAM,gBAAkC,CAAC,GAAG,SAAS,uCAAY,GAAG;AAEpE,QAAM,iBAAiB,MAAM;AAC5B,eAAW,IAAI,KAAK;AACpB,eAAW,IAAI,KAAK;AACpB,UAAM,UAAU;AAAA,EACjB;AAEA,QAAM,oBAAoB,CAAC,MAAyC;AACnE,QAAI,CAAC,EAAE,UAAW;AAElB,SAAK,UAAU,EAAE;AACjB,aAAS,UAAU,EAAE;AAErB,UAAM,OAAO,IAAI;AACjB,QAAI,CAAC,KAAM;AAEX,YAAQ,UAAU,KAAK,sBAAsB,EAAE;AAG/C,eAAW,IAAI,IAAI;AAEnB,UAAM,SAAS,KAAK,sBAAsB,EAAE;AAG5C,QAAI,QAAQ,YAAY,QAAQ;AAC/B,YAAM,UAAU,EAAE,IAAI;AACtB,QAAE,IAAI,WAAW,CAAC;AAAA,IACnB;AAAA,EACD;AAEA,QAAM,oBAAoB,CAAC,MAAyC;AACnE,QAAI,CAAC,EAAE,UAAW;AAElB,UAAM,QAAQ,EAAE,UAAU,KAAK;AAC/B,UAAM,WAAW,YAAY,OAAO,EAAE,YAAY,SAAS,OAAO;AAElE,SAAK,UAAU,EAAE;AACjB,aAAS,UAAU,EAAE;AACrB,iBAAa,UAAU;AAEvB,QAAI,CAAC,WAAW,IAAI,EAAG;AAEvB,UAAM,OAAO,IAAI;AACjB,QAAI,CAAC,KAAM;AAGX,QAAI,CAAC,WAAW,IAAI,GAAG;AACtB,YAAM,SAAS;AAAA,QACd,EAAE;AAAA,QACF;AAAA,QACA,QAAQ;AAAA,QACR,EAAE,gBAAgB;AAAA,MACnB;AAEA,YAAM,gBACL,EAAE,YAAY,kBAAkB,WAAW;AAE5C,UAAI,CAAC,UAAU,CAAC,eAAe;AAC9B,uBAAe;AAEf,0BAAkB,UAAU,EAAE;AAG9B,YAAI,MAAM,YAAY,KAAM,GAAE,IAAI,MAAM,OAAO;AAE/C;AAAA,MACD;AAEA,sBAAgB,GAAG,EAAE,OAAO,SAAS,CAAC;AAAA,IACvC;AAGA,QAAI,aAAa,OAAO,IAAI,EAAG;AAE/B,eAAW,GAAG,EAAE,OAAO,SAAS,CAAC;AAAA,EAClC;AAEA,QAAM,gBAAgB,CAAC,MAAyC;AAC/D,QAAI,CAAC,EAAE,UAAW;AAElB,UAAM,OAAO,IAAI;AACjB,QAAI,CAAC,KAAM;AAEX,UAAM,QAAQ,EAAE,UAAU,KAAK;AAC/B,UAAM,YAAY,EAAE,YAAY,SAAS;AAGzC,UAAM,WAAW,YAAY,OAAO,SAAS,KAAK,aAAa;AAE/D,UAAM,cAAc,WAAW,IAAI;AAEnC,mBAAe;AAEf,QAAI,CAAC,YAAa;AAElB,kBAAc,GAAG;AAAA,MAChB;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF;AAEA,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA,WAAW;AAAA,MACV;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,EACD;AACD;;;ACtOA,SAAS,aAAa,aAAAC,kBAAiB;AAIhC,IAAM,mBAAmB,CAAC,eAA+B;AAC/D,QAAM,kBAAkB;AAAA,IACvB,CAAC,MAAkB;AAClB,UAAI,WAAW,IAAI,EAAG,GAAE,eAAe;AAAA,IACxC;AAAA,IACA,CAAC,UAAU;AAAA,EACZ;AAEA,EAAAA,WAAU,MAAM;AACf,aAAS,iBAAiB,aAAa,iBAAiB,EAAE,SAAS,MAAM,CAAC;AAE1E,WAAO,MAAM;AACZ,eAAS,oBAAoB,aAAa,eAAe;AAAA,IAC1D;AAAA,EACD,GAAG,CAAC,eAAe,CAAC;AACrB;;;AClByB,SAAR,YAA6B,KAAK,EAAE,SAAS,IAAI,CAAC,GAAG;AAC1D,MAAI,CAAC,OAAO,OAAO,aAAa,YAAa;AAE7C,QAAM,OAAO,SAAS,QAAQ,SAAS,qBAAqB,MAAM,EAAE,CAAC;AACrE,QAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,QAAM,OAAO;AAEb,MAAI,aAAa,OAAO;AACtB,QAAI,KAAK,YAAY;AACnB,WAAK,aAAa,OAAO,KAAK,UAAU;AAAA,IAC1C,OAAO;AACL,WAAK,YAAY,KAAK;AAAA,IACxB;AAAA,EACF,OAAO;AACL,SAAK,YAAY,KAAK;AAAA,EACxB;AAEA,MAAI,MAAM,YAAY;AACpB,UAAM,WAAW,UAAU;AAAA,EAC7B,OAAO;AACL,UAAM,YAAY,SAAS,eAAe,GAAG,CAAC;AAAA,EAChD;AACF;;;ACvB8B,YAAY,sIAAsI;;;AP4FxL,gBAAAC,YAAA;AAlDF,IAAM,aAAa,CAClB;AAAA,EACC;AAAA,EACA,cAAc;AAAA,EACd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,mBAAAC,qBAAoB;AAAA,EACpB,oBAAoB;AAAA,EACpB,GAAG;AACJ,GACA,iBACI;AACJ,QAAM,eAAe,iBAAiB,aAAa;AACnD,QAAM,EAAE,GAAG,WAAW,IAAI;AAE1B,QAAM,EAAE,KAAK,YAAY,UAAU,IAAI,aAAa;AAAA,IACnD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,mBAAAA;AAAA,IACA;AAAA,EACD,CAAC;AAED,QAAM,EAAE,mBAAmB,mBAAmB,cAAc,IAAI;AAEhE,QAAM,cAAc,gBAAgB,KAAK,YAAY;AAErD,QAAM,CAACC,WAAUC,WAAU,IAAI,YAAY,GAAG;AAE9C,iBAAe,GAAG,CAAC,WAAW;AAC7B,IAAAD,UAAS,EAAE,WAAWD,mBAAkB,MAAM,EAAE,CAAC;AAAA,EAClD,CAAC;AAED,iBAAe,YAAY,CAAC,WAAW;AACtC,QAAI,OAAQ,CAAAC,UAAS,EAAE,YAAY,OAAO,CAAC;AAAA,QACtC,CAAAC,YAAW,YAAY;AAAA,EAC7B,CAAC;AAED,mBAAiB,UAAU;AAE3B,SACC,gBAAAH;AAAA,IAAC,UAAU;AAAA,IAAV;AAAA,MACA,uBAAoB;AAAA,MACpB,WAAU;AAAA,MACV,KAAK;AAAA,MACL,eAAe,cAAc,mBAAmB,aAAa;AAAA,MAC7D,eAAe,cAAc,mBAAmB,aAAa;AAAA,MAC7D,aAAa,cAAc,eAAe,WAAW;AAAA,MACrD,iBAAiB,cAAc,eAAe,eAAe;AAAA,MAC5D,GAAG;AAAA;AAAA,EACL;AAEF;AAEO,IAAM,YAAY,WAAW,UAAU;;;AQpGvC,IAAM,oBAAuC,CAAC,MACpD,8BAA8B,SAAS,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC;AAElD,IAAM,UAAU,CAAC,YAAoB,OAAe,OAAoB;AAC9E,QAAM,YAAY,aAAa,YAAY,EAAE;AAE7C,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ;AACrC,QAAI,SAAS,UAAU,CAAC,EAAG,QAAO,WAAW,CAAC;AAE/C,SAAO,WAAW,WAAW,SAAS,CAAC;AACxC;AAEO,IAAM,mBAAmB,CAAC,IAAiB,eAAuB;AACxE,QAAM,YAAY,WAAW,WAAW,SAAS,CAAC;AAElD,SAAO,CAAC,QAAQ,WAAW,EAAE;AAC9B;;;ACrBA,SAAiD,UAAAI,eAAc;;;ACOxD,IAAM,aAAa,CACzB,YACA,QACI;AACJ,SAAO,CAAC,KAAa,aAAqB;AACzC,QAAI,EAAC,2BAAK,YAAW,IAAI,YAAY,KAAM;AAE3C,UAAM,YAAY,WAAW,WAAW,SAAS,CAAC;AAClD,UAAM,cAAc,QAAQ,WAAW,IAAI,OAAO;AAClD,UAAM,kBAAkB,MAAM,EAAE,WAAW,KAAK;AAEhD,WAAO,QAAQ,YAAY,iBAAiB,IAAI,OAAO;AAAA,EACxD;AACD;;;ADDO,IAAM,gBAAgB,CAAC;AAAA,EAC7B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,MAAyB;AACxB,QAAM,YAAYC,QAA2B,IAAI;AAEjD,QAAM,oBAAoB,cAAc,CAAC,GAAG,GAAG,UAAU,IAAI;AAC7D,QAAMC,WAAU,WAAW,mBAAmB,SAAS;AAEvD,QAAM,gBAAkC,CAAC,IAAI,EAAE,SAAS,MAAM;AAC7D,UAAM,OAAO,uCAAW;AACxB,QAAI,CAAC,KAAM;AAEX,UAAM,OAAO,KAAK,sBAAsB;AACxC,UAAM,MAAM,OAAO,cAAc,KAAK;AAGtC,UAAM,UAAUA,SAAQ,KAAK,OAAO,IAAI,IAAI,IAAI,QAAQ;AACxD,QAAI,CAAC,QAAS;AAEd,QAAI,YAAY,EAAG,QAAO,QAAQ;AAElC,YAAQ,OAAO;AAAA,EAChB;AAEA,QAAM,gBAAgB,CAAC,MACtB,EAAE,aAAa,OAAO,IAAI;AAE3B,SAAO;AAAA,IACN;AAAA,IACA,WAAW;AAAA,MACV;AAAA,MACA;AAAA,IACD;AAAA,EACD;AACD;;;AE3DA,SAAS,aAAAC,kBAAiB;AAMnB,IAAM,mBAAmB,CAAC,QAAgB,MAAY,SAAkB;AAC9E,SAAOA,WAAU,MAAM;AAGtB,QAAI,KAAM,QAAO,IAAI;AAAA,QAChB,QAAO,CAAC;AAAA,EACd,GAAG,CAAC,MAAM,MAAM,MAAM,CAAC;AACxB;;;ACTO,IAAM,YAAY,CAAC,MAAmB;AAC5C,SAAO,CAAC,OAAa,EAAE,IAAI,SAAS,EAAE,IAAI,CAAC,KAAK,IAAI,EAAE,EAAE;AACzD;;;AnB4DG,gBAAAC,YAAA;AAhDI,IAAM,QAAQC;AAAA,EACpB,CACC,EAAE,cAAc,aAAa,iBAAiB,WAAW,GAAG,MAAM,GAClE,iBACI;AACJ,UAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,WAAW;AAAA,MACX;AAAA,MACA;AAAA,IACD,IAAI,iBAAiB;AAErB,UAAM,EAAE,OAAO,IAAI;AAEnB,UAAM,aAAa,WAAW,CAAC;AAE/B,UAAM,SAAS,UAAU,eAAe,CAAC;AAEzC,UAAM,EAAE,WAAW,UAAU,IAAI,cAAc;AAAA,MAC9C;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,MAAM,aAAa,KAAK;AAAA,MACjC;AAAA,MACA;AAAA,IACD,CAAC;AAED,UAAM,EAAE,eAAe,cAAc,IAAI;AAEzC,UAAM,cAAcC,iBAAgB,WAAW,cAAc,UAAU;AAEvE,UAAM,CAACC,WAAUC,WAAU,IAAI,YAAY,SAAS;AAEpD,qBAAiB,QAAQ,MAAM,IAAI;AAEnC,IAAAC,WAAU,MAAM;AACf,UAAI,KAAM,CAAAD,YAAW,eAAe;AAAA,UAC/B,CAAAD,UAAS,EAAE,eAAe,OAAO,CAAC;AAAA,IACxC,GAAG,CAAC,MAAMC,aAAYD,SAAQ,CAAC;AAE/B,WACC,gBAAAH;AAAA,MAAC;AAAA;AAAA,QACA,KAAK;AAAA,QACL,cAAc;AAAA,QACd;AAAA,QACA,aAAa;AAAA,UACZ,KAAK,CAAC,OAAO,iBAAiB,IAAI,UAAU;AAAA,UAC5C,KAAK,CAAC,OAAQ,cAAc,IAAI,CAAC,QAAQ,YAAY,EAAE;AAAA,QACxD;AAAA,QACA;AAAA,QACA,cAAc,CAAC,GAAG,SAAS;AAC1B,uDAAe,GAAG;AAClB,iBAAO,mBAAmB,GAAG,IAAI;AAAA,QAClC;AAAA,QACA,WAAW,cAAc,eAAe,SAAS;AAAA,QACjD,aAAa,cAAc,eAAe,WAAW;AAAA,QACrD,iBAAiB,cAAc,eAAe,eAAe;AAAA,QAC5D,GAAG;AAAA;AAAA,IACL;AAAA,EAEF;AACD;AAEA,MAAM,cAAc;;;ALjChB,gBAAAM,YAAA;AAtCG,IAAM,UAAUC;AAAA,EACtB,CACC;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACJ,GACA,QACI;AACJ,UAAM,EAAE,OAAO,gBAAgB,YAAY,IAAI,iBAAiB;AAEhE,UAAM,iBAAiB;AAAA,MACtB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAEA,WACC,gBAAAD;AAAA,MAAC;AAAA;AAAA,QACA;AAAA,QACA,SAAO;AAAA,QACN,GAAG;AAAA,QACJ,aAAU;AAAA,QACV,iBAAiB,CAAC,MAAM;AACvB,cAAI,eAAe,WAAW,IAAI,EAAG,QAAO,EAAE,eAAe;AAC7D,cAAI,CAAC,YAAa,GAAE,eAAe;AACnC,6DAAkB;AAAA,QACnB;AAAA,QACA,mBAAmB,CAAC,MAAM;AACzB,cAAI,CAAC,SAAS,CAAC,YAAa,GAAE,eAAe;AAC7C,iEAAoB;AAAA,QACrB;AAAA,QAEA,0BAAAA,KAAC,SAAO,GAAG,OAAO;AAAA;AAAA,IACnB;AAAA,EAEF;AACD;AAEA,QAAQ,cAAc;;;AyB3DtB,SAAS,cAAAE,aAAY,UAAAC,eAAc;AAEnC,SAAS,mBAAAC,wBAAuB;AAChC;AAAA,EAEC,WAAW;AAAA,OACL;AACP,SAAS,gBAAgB;;;ACPzB,SAAS,cAAAC,mBAAkB;AAE3B;AAAA,EAEC,aAAAC;AAAA,OACM;AACP,SAAS,YAAY;AACrB,SAAS,oBAAoB;AAwB1B,gBAAAC,YAAA;AAdI,IAAM,mBAAmBC,YAG9B,CAAC,OAAO,QAAQ;AACjB,QAAM,EAAE,WAAW,MAAM,MAAM,IAAI,iBAAiB;AACpD,QAAM,EAAE,OAAO,mBAAmB,OAAO,GAAG,MAAM,IAAI;AAEtD,SACC,gBAAAD;AAAA,IAAC;AAAA;AAAA,MACA,SAAS;AAAA,MACT,IAAI;AAAA,MACJ,gBAAc;AAAA,MACd,QAAQ,CAAC,SAAS;AAAA,MAElB,0BAAAA;AAAA,QAACE,WAAU;AAAA,QAAV;AAAA,UACA,cAAY,OAAO,SAAS;AAAA,UAC5B;AAAA,UAEA,OAAO;AAAA,YACN,eAAe,mBAAmB,SAAS;AAAA,YAC3C,GAAG;AAAA,UACJ;AAAA,UACC,GAAG;AAAA;AAAA,MACL;AAAA;AAAA,EACD;AAEF,CAAC;AAED,iBAAiB,cAAc;;;AD4B3B,gBAAAC,YAAA;AAxCG,IAAM,UAAUC;AAAA,EACtB,CACC,EAAE,iBAAiB,MAAM,WAAW,GAAG,eAAe,KAAK,GAAG,MAAM,GACpE,iBACI;AACJ,UAAM,oBAAoB,iBAAiB;AAE3C,UAAM,EAAE,gBAAgB,WAAW,YAAY,KAAK,IAAI,iBAAiB;AACzE,UAAM,EAAE,aAAa,mBAAmB,GAAG,MAAM,IAAI;AAErD,UAAM,YAAY,WAAW,WAAW,SAAS,CAAC;AAElD,UAAM,MAAMC,QAAuB,IAAI;AACvC,UAAM,cAAcC,iBAAgB,KAAK,YAAY;AAErD,UAAM,CAACC,WAAUC,WAAU,IAAI,YAAY,GAAG;AAE9C,mBAAe,eAAe,GAAG,CAAC,WAAW;AAC5C,YAAM,OAAO,UAAU;AACvB,UAAI,CAAC,KAAM;AAEX,YAAM,IAAI,QAAQ,QAAQ,IAAI;AAC9B,YAAM,YAAY,QAAQ,UAAU,IAAI;AACxC,YAAM,UAAU;AAAA,QACf;AAAA,QACA;AAAA,SACE,CAAC,IAAI,cAAc,QAAQ,WAAW,IAAI,IAAI,aAC/C;AAAA,MACF;AAEA,MAAAD,UAAS,EAAE,SAAS,QAAQ,SAAS,EAAE,CAAC;AAAA,IACzC,CAAC;AAED,mBAAe,eAAe,YAAY,CAAC,WAAW;AACrD,UAAI,OAAQ,CAAAA,UAAS,EAAE,YAAY,OAAO,CAAC;AAAA,UACtC,CAAAC,YAAW,YAAY;AAAA,IAC7B,CAAC;AAED,QAAI;AACH,aACC,gBAAAL;AAAA,QAAC;AAAA;AAAA,UACA,qBAAkB;AAAA,UAClB,eAAY;AAAA,UACZ,KAAK;AAAA,UACJ,GAAG;AAAA;AAAA,MACL;AAGF,WACC,gBAAAA,KAAC,YAAS,SAAS,cAAc,MAChC,0BAAAA;AAAA,MAAC;AAAA;AAAA,QACA,qBAAkB;AAAA,QAClB,eAAY;AAAA,QACZ,KAAK;AAAA,QACJ,GAAG;AAAA;AAAA,IACL,GACD;AAAA,EAEF;AACD;AAEA,QAAQ,cAAc;;;AE5FtB;AAAA,EACC,UAAU;AAAA,OAEJ;AASJ,gBAAAM,YAAA;AAHI,IAAM,SAA0B,CAAC,EAAE,GAAG,MAAM,MAAM;AACxD,SACC,gBAAAA,KAAC,yBAAsB,YAAY,MAAM,YACxC,0BAAAA,KAAC,mBAAiB,GAAG,OAAO,GAC7B;AAEF;AAEA,OAAO,cAAc;;;ACnBrB,SAA0C,UAAAC,eAAc;AAExD,SAAS,QAAQ,qBAAqB;;;ACJtC,SAAS,gBAAgB;AAIlB,IAAM,eAAe,CAC3B,MACA,MACA,iBAC6B;AAC7B,QAAM,WAAW,SAAS,IAAI;AAE9B,SAAO,QAAQ,eAAe,CAAC,MAAM,YAAY,IAAI;AACtD;;;ACZA,SAAS,YAAAC,iBAAgB;AAIlB,IAAM,eAAe,CAAC,MAAY,MAAa,YAAsB;AAC3E,QAAM,WAAWA,UAAS,IAAI;AAE9B,SAAO,QAAQ,UAAW,CAAC,MAAM,OAAO,IAAc;AACvD;;;ACCO,IAAM,sBAAsB,CAClC,WACA,eACA,gBACA,uBACI;AACJ,QAAM,qBAA6C,CAAC,GAAG,SAAS;AAC/D,QAAI,CAAC,UAAU,QAAS;AACxB,QAAI,CAAC,cAAc,QAAS;AAC5B,QAAI,yBAA6B;AAEjC,mBAAe,KAAK;AACpB,uBAAmB,OAAO;AAE1B,WAAO;AAAA,EACR;AAEA,QAAM,yBAAiD,CAAC,GAAG,SAAS;AACnE,QAAI,CAAC,cAAc,QAAS;AAC5B,QAAI,yBAA6B;AAEjC,mBAAe,OAAO;AACtB,uBAAmB,KAAK;AAAA,EACzB;AAEA,SAAO,EAAE,oBAAoB,uBAAuB;AACrD;;;AC3BO,IAAM,sBAAsB,CAClC,gBACA,WACA,YACA,uBACA,cACI;AACJ,QAAM,YAAY,WAAW,WAAW,SAAS,CAAC;AAElD,QAAM,aAAa,MAAM,SAAS,cAAc,qBAAqB;AAErE,iBAAe,eAAe,GAAG,CAAC,WAAW;AAC5C,QAAI,CAAC,sBAAuB;AAE5B,UAAM,OAAO,UAAU;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,UAAU,WAAW;AAC3B,QAAI,CAAC,QAAS;AAEd,UAAM,IAAI,QAAQ,QAAQ,IAAI;AAC9B,UAAM,aAAa,QAAQ,WAAW,IAAI;AAC1C,UAAM,aAAa,KAAK;AAAA,OACtB,CAAC,IAAI,eAAe,QAAQ,WAAW,IAAI,IAAI;AAAA,MAChD;AAAA,IACD;AAEA,UAAM,QAAS,QAAwB;AAEvC,UAAM,YACL,yCAAyC,KAAK,OAAO,UAAU,6EACW,UAAU;AAErF,UAAM,eAAe,+BAA+B,UAAU;AAE9D,aAAS,SAAwB,EAAE,WAAW,aAAa,CAAC;AAAA,EAC7D,CAAC;AAED,iBAAe,eAAe,YAAY,CAAC,WAAW;AACrD,QAAI,CAAC,sBAAuB;AAE5B,UAAM,UAAU,WAAW;AAC3B,QAAI,CAAC,QAAS;AAEd,QAAI,OAAQ,UAAS,SAAwB,EAAE,YAAY,OAAO,CAAC;AAAA,QAC9D,YAAW,SAAwB,YAAY;AAAA,EACrD,CAAC;AACF;;;AJqDG,gBAAAC,YAAA;AAzDI,IAAM,OAAsB,CAAC;AAAA,EACnC,cAAc;AAAA,EACd,MAAM;AAAA,EACN,cAAc;AAAA,EACd,aAAa,CAAC,MAAM;AAAA,EACpB,MAAM;AAAA,EACN,SAAS;AAAA,EACT,cAAc;AAAA,EACd,QAAQ;AAAA,EACR,oBAAoB;AAAA,EACpB,YAAY;AAAA,EACZ,wBAAwB;AAAA,EACxB;AACD,MAAM;AACL,QAAM,iBAAiB,gBAAsB;AAC7C,QAAM,qBAAqB,gBAAwB,IAAI;AAEvD,QAAM,CAAC,MAAM,YAAY,IAAI,aAAa,aAAa,OAAO,aAAa;AAC3E,QAAM,CAAC,MAAM,OAAO,IAAI,aAAa,WAAW,CAAC,GAAG,OAAO,QAAQ;AAEnE,QAAM,YAAYC,QAA8B,IAAI;AACpD,QAAM,gBAAgBA,QAA8B,IAAI;AAExD,QAAM,qBAAqB;AAAA,IAC1B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAEA,QAAM,UAA8B;AAAA,IACnC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACJ;AAEA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAEA,SACC,gBAAAD,KAAC,iBAAc,MAAY,cAA4B,OACtD,0BAAAA,KAAC,yBAAsB,OAAO,SAAU,UAAS,GAClD;AAEF;;;AK/GA,SAAS,cAAAE,aAAY,aAAAC,YAAW,UAAAC,eAAc;AAE9C,SAAS,mBAAAC,wBAAuB;;;ACFzB,IAAMC,oBAAmB,CAAC,OAAoB;AACpD,QAAM,OAAO,GAAG,sBAAsB;AACtC,QAAM,SAAS,GAAG;AAClB,QAAM,aAAa,OAAO,sBAAsB;AAEhD,SAAO,WAAW,SAAS,KAAK;AACjC;;;ADiHG,gBAAAC,aAAA;AAlGI,IAAM,aAAaC;AAAA,EACzB,CAAC,EAAE,cAAc,WAAW,eAAe,GAAG,MAAM,GAAG,iBAAiB;AACvE,UAAM;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD,IAAI,iBAAiB;AACrB,UAAM,EAAE,EAAE,IAAI;AAEd,UAAM,cAAcC,QAAsB,IAAI;AAE9C,UAAM,cAAcC,iBAAgB,eAAe,YAAY;AAE/D,UAAM,CAACC,WAAUC,WAAU,IAAI,YAAY,aAAa;AAExD,UAAM,MAAM;AAEZ,IAAAC,WAAU,MAAM;AACf,UAAI,SAAS,WAAW,WAAW,SAAS,CAAC,EAAG;AAEhD,QAAE,IAAI,GAAG;AAET,qBAAe,OAAO;AACtB,yBAAmB,KAAK;AAAA,IACzB,GAAG;AAAA,MACF;AAAA,MACA,eAAe;AAAA,MACf,mBAAmB;AAAA,MACnB,WAAW;AAAA,MACX,WAAW,WAAW,SAAS,CAAC;AAAA,MAChC,EAAE;AAAA,IACH,CAAC;AAED,IAAAA,WAAU,MAAM;AACf,QAAE,IAAI,GAAG;AAAA,IACV,GAAG,CAAC,EAAE,GAAG,CAAC;AAEV,UAAM,kBAAkB,MAAMD,YAAW,oBAAoB;AAE7D,UAAM,gBAAgB,MAAM;AAC3B,YAAM,OAAO,cAAc;AAC3B,UAAI,CAAC,KAAM;AACX,QAAE,IAAI,MAAME,kBAAiB,IAAI,GAAG,KAAK,EAAE,IAAI,CAAC,CAAC;AAAA,IAClD;AAEA,UAAM,UAAU,CAAC,MAAc,KAAa,aAAqB;AAChE,YAAM,OAAO,cAAc;AAC3B,UAAI,CAAC,KAAM;AAEX,YAAM,OAAO,MAAM;AAEnB,YAAM,MAAMA,kBAAiB,IAAI;AACjC,YAAM,QAAQ,WAAW;AACzB,YAAM,eAAe,iBAAiB,EAAE,IAAI,GAAG,KAAK,GAAG,IAAI;AAE3D,QAAE,IAAI,eAAe,cAAc,KAAK,GAAG,CAAC;AAE5C,YAAM,eAAe;AAErB,YAAM,cACL,KAAK,KAAK,QAAQ,IAClB,KAAK,IAAI,KAAK,IAAI,QAAQ,IAAI,eAAe,MAAM,CAAC;AAErD,YAAM,UAAU,KAAK,IAAI,QAAQ,IAAI;AACrC,YAAM,WACL,eAAe,OAAO,CAAC,WAAW,eAAe,OAAO;AAEzD,UAAI,gBAAgB,KAAK,UAAU;AAClC,wBAAgB;AAChB,eAAO,cAAc;AAAA,MACtB;AAEA,kBAAY,UAAU,OAAO;AAAA,QAAsB,CAACC,UACnD,QAAQ,KAAKA,OAAM,WAAW;AAAA,MAC/B;AAAA,IACD;AAEA,UAAM,gBAAkC,CAAC,GAAG,EAAE,SAAS,MAAM;AAC5D,UAAI,mBAAmB,OAAO,IAAI,EAAG,QAAO,cAAc;AAE1D,MAAAJ,UAAS,EAAE,oBAAoB,KAAK,CAAC;AACrC,kBAAY,UAAU,OAAO;AAAA,QAAsB,CAAC,SACnD,QAAQ,MAAM,MAAM,QAAQ;AAAA,MAC7B;AAAA,IACD;AAEA,UAAM,oBAAoB,MAAM;AAC/B,UAAI,YAAY,YAAY,KAAM;AAElC,aAAO,qBAAqB,YAAY,OAAO;AAC/C,kBAAY,UAAU;AACtB,sBAAgB;AAAA,IACjB;AAEA,WACC,gBAAAJ;AAAA,MAAC;AAAA;AAAA,QACA,wBAAqB;AAAA,QACrB,KAAK;AAAA,QACL,cAAc;AAAA,QACd,aAAa;AAAA,UACZ,KAAKO;AAAA,UACL;AAAA,QACD;AAAA,QACA,WAAW,cAAc,eAAe,SAAS;AAAA,QACjD,eAAe,cAAc,mBAAmB,aAAa;AAAA,QAC7D,cAAc,cAAc,wBAAwB,YAAY;AAAA,QAC/D,GAAG;AAAA;AAAA,IACL;AAAA,EAEF;AACD;AAEA,WAAW,cAAc;;;AExIzB,SAAS,cAAAE,mBAAkB;;;ACA3B,SAAS,aAAAC,YAAW,YAAAC,iBAAgB;AAE7B,IAAM,aAAa,MAAM;AAC/B,QAAM,CAAC,SAAS,UAAU,IAAIA,UAAS,KAAK;AAE5C,EAAAD,WAAU,MAAM,WAAW,IAAI,GAAG,CAAC,CAAC;AAEpC,SAAO;AACR;;;ACiBE,gBAAAE,aAAA;AAjBK,IAAM,QAAY,MAAM;AAC9B,QAAM,EAAE,YAAY,aAAa,UAAU,IAAI,iBAAiB;AAEhE,QAAM,oBAAoB,cAAc,CAAC,GAAG,GAAG,UAAU,IAAI;AAE7D,QAAM,UAAU,WAAW;AAE3B,MAAI,CAAC,QAAS,QAAO;AAErB,QAAM,YAAY,aAAa,mBAAmB,UAAU,OAAQ;AAEpE,QAAM,CAAC,GAAG,WAAW,IAAI,UAAU;AAAA,IAClC,CAAC,CAAC,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK,MAAM,IAAI,CAAC;AAAA,IAChD,CAAC,GAAG,CAAC,CAAC;AAAA,EACP;AAEA,SAAO,CAAC,GAAG,aAAa,MAAM,EAAE,IAAI,CAAC,QAAQ,UAC5C,gBAAAA;AAAA,IAAC;AAAA;AAAA,MAEA,kBAAe;AAAA,MACf,OAAO;AAAA,QACN,YAAY;AAAA,QACZ,SAAS;AAAA,QACT;AAAA,MACD;AAAA;AAAA,IANK;AAAA,EAON,CACA;AACF;;;ACnCO,IAAM,SAAS;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD;;;ACaE,gBAAAC,aAAA;AAZK,IAAM,QAAY,MAAM;AAC9B,QAAM,EAAE,YAAY,aAAa,UAAU,IAAI,iBAAiB;AAEhE,QAAM,UAAU,WAAW;AAE3B,MAAI,CAAC,QAAS,QAAO;AAErB,QAAM,aAAa,cAAc,CAAC,GAAG,GAAG,UAAU,IAAI,YAAY;AAAA,IACjE,CAAC,UAAU,QAAQ,OAAO,UAAU,OAAQ;AAAA,EAC7C;AAEA,SAAO,UAAU,IAAI,CAAC,MAAM,UAC3B,gBAAAA;AAAA,IAAC;AAAA;AAAA,MAEA,mBAAgB;AAAA,MAChB,OAAO;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,QACP,UAAU;AAAA,QACV,WAAW;AAAA,QACX,aAAa,OAAO,QAAQ,OAAO,MAAM;AAAA,QACzC,QAAQ;AAAA,MACT;AAAA;AAAA,IATK;AAAA,EAUN,CACA;AACF;;;AJjBE,SAYC,OAAAC,OAZD;AATK,IAAM,YAAYC,YAGvB,CAAC,EAAE,GAAG,MAAM,GAAG,QAAQ;AACxB,QAAM,EAAE,KAAK,IAAI,iBAAiB;AAElC,MAAI,CAAC,KAAM,QAAO;AAElB,SACC;AAAA,IAAC;AAAA;AAAA,MACA;AAAA,MACA,wBAAqB;AAAA,MACrB,OAAO;AAAA,QACN,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,eAAe;AAAA,QACf,eAAe;AAAA,MAChB;AAAA,MACC,GAAG;AAAA,MAEJ;AAAA,wBAAAD,MAAC,SAAM;AAAA,QACP,gBAAAA,MAAC,SAAM;AAAA;AAAA;AAAA,EACR;AAEF,CAAC;AAED,UAAU,cAAc;;;AKlCgB,YAAY,8oCAAkpC;;;AzCwB/rC,IAAM,SAAS;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD;","names":["forwardRef","createContext","jsx","useContext","useContext","forwardRef","useEffect","useComposedRefs","useRef","transformTemplate","useRef","setStyle","resetStyle","useEffect","jsx","transformTemplate","setStyle","resetStyle","useRef","useRef","getSnap","useEffect","jsx","forwardRef","useComposedRefs","setStyle","resetStyle","useEffect","jsx","forwardRef","forwardRef","useRef","useComposedRefs","forwardRef","Primitive","jsx","forwardRef","Primitive","jsx","forwardRef","useRef","useComposedRefs","setStyle","resetStyle","jsx","useRef","useState","jsx","useRef","forwardRef","useEffect","useRef","useComposedRefs","getMinConstraint","jsx","forwardRef","useRef","useComposedRefs","setStyle","resetStyle","useEffect","getMinConstraint","time","forwardRef","useEffect","useState","jsx","jsx","jsx","forwardRef"]}